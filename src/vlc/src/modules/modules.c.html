<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>modules.c source code [vlc/src/modules/modules.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'vlc/src/modules/modules.c'; var root_path = '../../..'; var data_path = '../../../../data';</script>
<script src='../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>vlc</a>/<a href='..'>src</a>/<a href='./'>modules</a>/<a href='modules.c.html'>modules.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*****************************************************************************</i></td></tr>
<tr><th id="2">2</th><td><i> * modules.c : Builtin and plugin modules management functions</i></td></tr>
<tr><th id="3">3</th><td><i> *****************************************************************************</i></td></tr>
<tr><th id="4">4</th><td><i> * Copyright (C) 2001-2011 VLC authors and VideoLAN</i></td></tr>
<tr><th id="5">5</th><td><i> * $Id: 2fa992824e1c21183488230a520771d7c0107816 $</i></td></tr>
<tr><th id="6">6</th><td><i> *</i></td></tr>
<tr><th id="7">7</th><td><i> * Authors: Sam Hocevar &lt;sam@zoy.org&gt;</i></td></tr>
<tr><th id="8">8</th><td><i> *          Ethan C. Baldridge &lt;BaldridgeE@cadmus.com&gt;</i></td></tr>
<tr><th id="9">9</th><td><i> *          Hans-Peter Jansen &lt;hpj@urpla.net&gt;</i></td></tr>
<tr><th id="10">10</th><td><i> *          Gildas Bazin &lt;gbazin@videolan.org&gt;</i></td></tr>
<tr><th id="11">11</th><td><i> *          RÃ©mi Denis-Courmont</i></td></tr>
<tr><th id="12">12</th><td><i> *</i></td></tr>
<tr><th id="13">13</th><td><i> * This program is free software; you can redistribute it and/or modify it</i></td></tr>
<tr><th id="14">14</th><td><i> * under the terms of the GNU Lesser General Public License as published by</i></td></tr>
<tr><th id="15">15</th><td><i> * the Free Software Foundation; either version 2.1 of the License, or</i></td></tr>
<tr><th id="16">16</th><td><i> * (at your option) any later version.</i></td></tr>
<tr><th id="17">17</th><td><i> *</i></td></tr>
<tr><th id="18">18</th><td><i> * This program is distributed in the hope that it will be useful,</i></td></tr>
<tr><th id="19">19</th><td><i> * but WITHOUT ANY WARRANTY; without even the implied warranty of</i></td></tr>
<tr><th id="20">20</th><td><i> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</i></td></tr>
<tr><th id="21">21</th><td><i> * GNU Lesser General Public License for more details.</i></td></tr>
<tr><th id="22">22</th><td><i> *</i></td></tr>
<tr><th id="23">23</th><td><i> * You should have received a copy of the GNU Lesser General Public License</i></td></tr>
<tr><th id="24">24</th><td><i> * along with this program; if not, write to the Free Software Foundation,</i></td></tr>
<tr><th id="25">25</th><td><i> * Inc., 51 Franklin Street, Fifth Floor, Boston MA 02110-1301, USA.</i></td></tr>
<tr><th id="26">26</th><td><i> *****************************************************************************/</i></td></tr>
<tr><th id="27">27</th><td></td></tr>
<tr><th id="28">28</th><td><u>#<span data-ppcond="28">ifdef</span> <span class="macro" data-ref="_M/HAVE_CONFIG_H">HAVE_CONFIG_H</span></u></td></tr>
<tr><th id="29">29</th><td><u># include <a href="../../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#<span data-ppcond="28">endif</span></u></td></tr>
<tr><th id="31">31</th><td></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="../../../include/stdlib.h.html">&lt;stdlib.h&gt;</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="../../../include/string.h.html">&lt;string.h&gt;</a></u></td></tr>
<tr><th id="34">34</th><td><u>#<span data-ppcond="34">ifdef</span> <a class="macro" href="../../config.h.html#87" data-ref="_M/ENABLE_NLS">ENABLE_NLS</a></u></td></tr>
<tr><th id="35">35</th><td><u># include <a href="../../../include/libintl.h.html">&lt;libintl.h&gt;</a></u></td></tr>
<tr><th id="36">36</th><td><u>#<span data-ppcond="34">endif</span></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../../include/assert.h.html">&lt;assert.h&gt;</a></u></td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../../include/vlc_common.h.html">&lt;vlc_common.h&gt;</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../../include/vlc_modules.h.html">&lt;vlc_modules.h&gt;</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../libvlc.h.html">"libvlc.h"</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="../config/configuration.h.html">"config/configuration.h"</a></u></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="../../include/vlc_arrays.h.html">"vlc_arrays.h"</a></u></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="modules.h.html">"modules/modules.h"</a></u></td></tr>
<tr><th id="45">45</th><td></td></tr>
<tr><th id="46">46</th><td><i class="doc">/**</i></td></tr>
<tr><th id="47">47</th><td><i class="doc"> * Checks whether a module implements a capability.</i></td></tr>
<tr><th id="48">48</th><td><i class="doc"> *</i></td></tr>
<tr><th id="49">49</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">m</span> the module</i></td></tr>
<tr><th id="50">50</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">cap</span> the capability to check</i></td></tr>
<tr><th id="51">51</th><td><i class="doc"> * <span class="command">\return</span> true if the module has the capability</i></td></tr>
<tr><th id="52">52</th><td><i class="doc"> */</i></td></tr>
<tr><th id="53">53</th><td><span class="macro" title="_Bool" data-ref="_M/bool">bool</span> <dfn class="decl def" id="module_provides" title='module_provides' data-ref="module_provides">module_provides</dfn> (<em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col9 decl" id="29m" title='m' data-type='const module_t *' data-ref="29m">m</dfn>, <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="30cap" title='cap' data-type='const char *' data-ref="30cap">cap</dfn>)</td></tr>
<tr><th id="54">54</th><td>{</td></tr>
<tr><th id="55">55</th><td>    <b>return</b> !<a class="macro" href="../../../include/x86_64-linux-gnu/bits/string2.h.html#799" title="__extension__ ({ size_t __s1_len, __s2_len; (__builtin_constant_p (module_get_capability (m)) &amp;&amp; __builtin_constant_p (cap) &amp;&amp; (__s1_len = __builtin_strlen (module_get_capability (m)), __s2_len = __builtin_strlen (cap), (!((size_t)(const void *)((module_get_capability (m)) + 1) - (size_t)(const void *)(module_get_capability (m)) == 1) || __s1_len &gt;= 4) &amp;&amp; (!((size_t)(const void *)((cap) + 1) - (size_t)(const void *)(cap) == 1) || __s2_len &gt;= 4)) ? __builtin_strcmp (module_get_capability (m), cap) : (__builtin_constant_p (module_get_capability (m)) &amp;&amp; ((size_t)(const void *)((module_get_capability (m)) + 1) - (size_t)(const void *)(module_get_capability (m)) == 1) &amp;&amp; (__s1_len = __builtin_strlen (module_get_capability (m)), __s1_len &lt; 4) ? (__builtin_constant_p (cap) &amp;&amp; ((size_t)(const void *)((cap) + 1) - (size_t)(const void *)(cap) == 1) ? __builtin_strcmp (module_get_capability (m), cap) : (__extension__ ({ const unsigned char *__s2 = (const unsigned char *) (const char *) (cap); int __result = (((const unsigned char *) (const char *) (module_get_capability (m)))[0] - __s2[0]); if (__s1_len &gt; 0 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (module_get_capability (m)))[1] - __s2[1]); if (__s1_len &gt; 1 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (module_get_capability (m)))[2] - __s2[2]); if (__s1_len &gt; 2 &amp;&amp; __result == 0) __result = (((const unsigned char *) (const char *) (module_get_capability (m)))[3] - __s2[3]); } } __result; }))) : (__builtin_constant_p (cap) &amp;&amp; ((size_t)(const void *)((cap) + 1) - (size_t)(const void *)(cap) == 1) &amp;&amp; (__s2_len = __builtin_strlen (cap), __s2_len &lt; 4) ? (__builtin_constant_p (module_get_capability (m)) &amp;&amp; ((size_t)(const void *)((module_get_capability (m)) + 1) - (size_t)(const void *)(module_get_capability (m)) == 1) ? __builtin_strcmp (module_get_capability (m), cap) : (- (__extension__ ({ const unsigned char *__s2 = (const unsigned char *) (const char *) (module_get_capability (m)); int __result = (((const unsigned char *) (const char *) (cap))[0] - __s2[0]); if (__s2_len &gt; 0 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (cap))[1] - __s2[1]); if (__s2_len &gt; 1 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (cap))[2] - __s2[2]); if (__s2_len &gt; 2 &amp;&amp; __result == 0) __result = (((const unsigned char *) (const char *) (cap))[3] - __s2[3]); } } __result; })))) : __builtin_strcmp (module_get_capability (m), cap)))); })" data-ref="_M/strcmp">strcmp</a> (<a class="ref" href="#module_get_capability" title='module_get_capability' data-ref="module_get_capability">module_get_capability</a> (<a class="local col9 ref" href="#29m" title='m' data-ref="29m">m</a>), <a class="local col0 ref" href="#30cap" title='cap' data-ref="30cap">cap</a>);</td></tr>
<tr><th id="56">56</th><td>}</td></tr>
<tr><th id="57">57</th><td></td></tr>
<tr><th id="58">58</th><td><i class="doc">/**</i></td></tr>
<tr><th id="59">59</th><td><i class="doc"> * Get the internal name of a module</i></td></tr>
<tr><th id="60">60</th><td><i class="doc"> *</i></td></tr>
<tr><th id="61">61</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">m</span> the module</i></td></tr>
<tr><th id="62">62</th><td><i class="doc"> * <span class="command">\return</span> the module name</i></td></tr>
<tr><th id="63">63</th><td><i class="doc"> */</i></td></tr>
<tr><th id="64">64</th><td><em>const</em> <em>char</em> *<dfn class="decl def" id="module_get_object" title='module_get_object' data-ref="module_get_object">module_get_object</dfn>( <em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col1 decl" id="31m" title='m' data-type='const module_t *' data-ref="31m">m</dfn> )</td></tr>
<tr><th id="65">65</th><td>{</td></tr>
<tr><th id="66">66</th><td>    <b>if</b> (<a class="macro" href="../../include/vlc_common.h.html#116" title="__builtin_expect(!!(m-&gt;i_shortcuts == 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col1 ref" href="#31m" title='m' data-ref="31m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::i_shortcuts" title='module_t::i_shortcuts' data-ref="module_t::i_shortcuts">i_shortcuts</a> == <var>0</var>))</td></tr>
<tr><th id="67">67</th><td>        <b>return</b> <q>"unnamed"</q>;</td></tr>
<tr><th id="68">68</th><td>    <b>return</b> <a class="local col1 ref" href="#31m" title='m' data-ref="31m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::pp_shortcuts" title='module_t::pp_shortcuts' data-ref="module_t::pp_shortcuts">pp_shortcuts</a>[<var>0</var>];</td></tr>
<tr><th id="69">69</th><td>}</td></tr>
<tr><th id="70">70</th><td></td></tr>
<tr><th id="71">71</th><td><i class="doc">/**</i></td></tr>
<tr><th id="72">72</th><td><i class="doc"> * Get the human-friendly name of a module.</i></td></tr>
<tr><th id="73">73</th><td><i class="doc"> *</i></td></tr>
<tr><th id="74">74</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">m</span> the module</i></td></tr>
<tr><th id="75">75</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">long_name</span> TRUE to have the long name of the module</i></td></tr>
<tr><th id="76">76</th><td><i class="doc"> * <span class="command">\return</span> the short or long name of the module</i></td></tr>
<tr><th id="77">77</th><td><i class="doc"> */</i></td></tr>
<tr><th id="78">78</th><td><em>const</em> <em>char</em> *<dfn class="decl def" id="module_get_name" title='module_get_name' data-ref="module_get_name">module_get_name</dfn>( <em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col2 decl" id="32m" title='m' data-type='const module_t *' data-ref="32m">m</dfn>, <span class="macro" title="_Bool" data-ref="_M/bool">bool</span> <dfn class="local col3 decl" id="33long_name" title='long_name' data-type='_Bool' data-ref="33long_name">long_name</dfn> )</td></tr>
<tr><th id="79">79</th><td>{</td></tr>
<tr><th id="80">80</th><td>    <b>if</b>( <a class="local col3 ref" href="#33long_name" title='long_name' data-ref="33long_name">long_name</a> &amp;&amp; ( <a class="local col2 ref" href="#32m" title='m' data-ref="32m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::psz_longname" title='module_t::psz_longname' data-ref="module_t::psz_longname">psz_longname</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) )</td></tr>
<tr><th id="81">81</th><td>        <b>return</b> <a class="local col2 ref" href="#32m" title='m' data-ref="32m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::psz_longname" title='module_t::psz_longname' data-ref="module_t::psz_longname">psz_longname</a>;</td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td>    <b>if</b> (<a class="local col2 ref" href="#32m" title='m' data-ref="32m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::psz_shortname" title='module_t::psz_shortname' data-ref="module_t::psz_shortname">psz_shortname</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="84">84</th><td>        <b>return</b> <a class="local col2 ref" href="#32m" title='m' data-ref="32m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::psz_shortname" title='module_t::psz_shortname' data-ref="module_t::psz_shortname">psz_shortname</a>;</td></tr>
<tr><th id="85">85</th><td>    <b>return</b> <a class="ref" href="#module_get_object" title='module_get_object' data-ref="module_get_object">module_get_object</a> (<a class="local col2 ref" href="#32m" title='m' data-ref="32m">m</a>);</td></tr>
<tr><th id="86">86</th><td>}</td></tr>
<tr><th id="87">87</th><td></td></tr>
<tr><th id="88">88</th><td><i class="doc">/**</i></td></tr>
<tr><th id="89">89</th><td><i class="doc"> * Get the help for a module</i></td></tr>
<tr><th id="90">90</th><td><i class="doc"> *</i></td></tr>
<tr><th id="91">91</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">m</span> the module</i></td></tr>
<tr><th id="92">92</th><td><i class="doc"> * <span class="command">\return</span> the help</i></td></tr>
<tr><th id="93">93</th><td><i class="doc"> */</i></td></tr>
<tr><th id="94">94</th><td><em>const</em> <em>char</em> *<dfn class="decl def" id="module_get_help" title='module_get_help' data-ref="module_get_help">module_get_help</dfn>( <em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col4 decl" id="34m" title='m' data-type='const module_t *' data-ref="34m">m</dfn> )</td></tr>
<tr><th id="95">95</th><td>{</td></tr>
<tr><th id="96">96</th><td>    <b>return</b> <a class="local col4 ref" href="#34m" title='m' data-ref="34m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::psz_help" title='module_t::psz_help' data-ref="module_t::psz_help">psz_help</a>;</td></tr>
<tr><th id="97">97</th><td>}</td></tr>
<tr><th id="98">98</th><td></td></tr>
<tr><th id="99">99</th><td><i class="doc">/**</i></td></tr>
<tr><th id="100">100</th><td><i class="doc"> * Gets the capability of a module</i></td></tr>
<tr><th id="101">101</th><td><i class="doc"> *</i></td></tr>
<tr><th id="102">102</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">m</span> the module</i></td></tr>
<tr><th id="103">103</th><td><i class="doc"> * <span class="command">\return</span> the capability, or "none" if unspecified</i></td></tr>
<tr><th id="104">104</th><td><i class="doc"> */</i></td></tr>
<tr><th id="105">105</th><td><em>const</em> <em>char</em> *<dfn class="decl def" id="module_get_capability" title='module_get_capability' data-ref="module_get_capability">module_get_capability</dfn> (<em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col5 decl" id="35m" title='m' data-type='const module_t *' data-ref="35m">m</dfn>)</td></tr>
<tr><th id="106">106</th><td>{</td></tr>
<tr><th id="107">107</th><td>    <b>return</b> (<a class="local col5 ref" href="#35m" title='m' data-ref="35m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::psz_capability" title='module_t::psz_capability' data-ref="module_t::psz_capability">psz_capability</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) ? <a class="local col5 ref" href="#35m" title='m' data-ref="35m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::psz_capability" title='module_t::psz_capability' data-ref="module_t::psz_capability">psz_capability</a> : <q>"none"</q>;</td></tr>
<tr><th id="108">108</th><td>}</td></tr>
<tr><th id="109">109</th><td></td></tr>
<tr><th id="110">110</th><td><i class="doc">/**</i></td></tr>
<tr><th id="111">111</th><td><i class="doc"> * Get the score for a module</i></td></tr>
<tr><th id="112">112</th><td><i class="doc"> *</i></td></tr>
<tr><th id="113">113</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">m</span> the module</i></td></tr>
<tr><th id="114">114</th><td><i class="doc"> * return the score for the capability</i></td></tr>
<tr><th id="115">115</th><td><i class="doc"> */</i></td></tr>
<tr><th id="116">116</th><td><em>int</em> <dfn class="decl def" id="module_get_score" title='module_get_score' data-ref="module_get_score">module_get_score</dfn>( <em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col6 decl" id="36m" title='m' data-type='const module_t *' data-ref="36m">m</dfn> )</td></tr>
<tr><th id="117">117</th><td>{</td></tr>
<tr><th id="118">118</th><td>    <b>return</b> <a class="local col6 ref" href="#36m" title='m' data-ref="36m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::i_score" title='module_t::i_score' data-ref="module_t::i_score">i_score</a>;</td></tr>
<tr><th id="119">119</th><td>}</td></tr>
<tr><th id="120">120</th><td></td></tr>
<tr><th id="121">121</th><td><i class="doc">/**</i></td></tr>
<tr><th id="122">122</th><td><i class="doc"> * Translate a string using the module's text domain</i></td></tr>
<tr><th id="123">123</th><td><i class="doc"> *</i></td></tr>
<tr><th id="124">124</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">m</span> the module</i></td></tr>
<tr><th id="125">125</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">str</span> the American English ASCII string to localize</i></td></tr>
<tr><th id="126">126</th><td><i class="doc"> * <span class="command">\return</span> the gettext-translated string</i></td></tr>
<tr><th id="127">127</th><td><i class="doc"> */</i></td></tr>
<tr><th id="128">128</th><td><em>const</em> <em>char</em> *<dfn class="decl def" id="module_gettext" title='module_gettext' data-ref="module_gettext">module_gettext</dfn> (<em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col7 decl" id="37m" title='m' data-type='const module_t *' data-ref="37m">m</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="38str" title='str' data-type='const char *' data-ref="38str">str</dfn>)</td></tr>
<tr><th id="129">129</th><td>{</td></tr>
<tr><th id="130">130</th><td>    <b>if</b> (<a class="local col7 ref" href="#37m" title='m' data-ref="37m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::parent" title='module_t::parent' data-ref="module_t::parent">parent</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="131">131</th><td>        <a class="local col7 ref" href="#37m" title='m' data-ref="37m">m</a> = <a class="local col7 ref" href="#37m" title='m' data-ref="37m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::parent" title='module_t::parent' data-ref="module_t::parent">parent</a>;</td></tr>
<tr><th id="132">132</th><td>    <b>if</b> (<a class="macro" href="../../include/vlc_common.h.html#116" title="__builtin_expect(!!(str == ((void*)0) || *str == &apos;\0&apos;), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col8 ref" href="#38str" title='str' data-ref="38str">str</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || *<a class="local col8 ref" href="#38str" title='str' data-ref="38str">str</a> == <kbd>'\0'</kbd>))</td></tr>
<tr><th id="133">133</th><td>        <b>return</b> <q>""</q>;</td></tr>
<tr><th id="134">134</th><td><u>#<span data-ppcond="134">ifdef</span> <a class="macro" href="../../config.h.html#87" data-ref="_M/ENABLE_NLS">ENABLE_NLS</a></u></td></tr>
<tr><th id="135">135</th><td>    <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="39domain" title='domain' data-type='const char *' data-ref="39domain">domain</dfn> = <a class="local col7 ref" href="#37m" title='m' data-ref="37m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::domain" title='module_t::domain' data-ref="module_t::domain">domain</a>;</td></tr>
<tr><th id="136">136</th><td>    <b>return</b> <a class="macro" href="../../../include/libintl.h.html#111" title="dcgettext ((domain != ((void*)0)) ? domain : &quot;vlc&quot;, str, 5)" data-ref="_M/dgettext">dgettext</a> ((<a class="local col9 ref" href="#39domain" title='domain' data-ref="39domain">domain</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) ? <a class="local col9 ref" href="#39domain" title='domain' data-ref="39domain">domain</a> : <a class="macro" href="../../config.h.html#620" title="&quot;vlc&quot;" data-ref="_M/PACKAGE_NAME">PACKAGE_NAME</a>, <a class="local col8 ref" href="#38str" title='str' data-ref="38str">str</a>);</td></tr>
<tr><th id="137">137</th><td><u>#<span data-ppcond="134">else</span></u></td></tr>
<tr><th id="138">138</th><td>    (<em>void</em>)m;</td></tr>
<tr><th id="139">139</th><td>    <b>return</b> str;</td></tr>
<tr><th id="140">140</th><td><u>#<span data-ppcond="134">endif</span></u></td></tr>
<tr><th id="141">141</th><td>}</td></tr>
<tr><th id="142">142</th><td></td></tr>
<tr><th id="143">143</th><td><u>#undef <a class="macro" href="../../include/vlc_modules.h.html#49" data-ref="_M/module_start">module_start</a></u></td></tr>
<tr><th id="144">144</th><td><em>int</em> <dfn class="decl def" id="module_start" title='module_start' data-ref="module_start">module_start</dfn> (<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col0 decl" id="40obj" title='obj' data-type='vlc_object_t *' data-ref="40obj">obj</dfn>, <em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col1 decl" id="41m" title='m' data-type='const module_t *' data-ref="41m">m</dfn>)</td></tr>
<tr><th id="145">145</th><td>{</td></tr>
<tr><th id="146">146</th><td>   <em>int</em> (*<dfn class="local col2 decl" id="42activate" title='activate' data-type='int (*)(vlc_object_t *)' data-ref="42activate">activate</dfn>) (<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *) = <a class="local col1 ref" href="#41m" title='m' data-ref="41m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::pf_activate" title='module_t::pf_activate' data-ref="module_t::pf_activate">pf_activate</a>;</td></tr>
<tr><th id="147">147</th><td></td></tr>
<tr><th id="148">148</th><td>   <b>return</b> (<a class="local col2 ref" href="#42activate" title='activate' data-ref="42activate">activate</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) ? <a class="local col2 ref" href="#42activate" title='activate' data-ref="42activate">activate</a> (<a class="local col0 ref" href="#40obj" title='obj' data-ref="40obj">obj</a>) : <a class="macro" href="../../include/vlc_common.h.html#374" title="(-0)" data-ref="_M/VLC_SUCCESS">VLC_SUCCESS</a>;</td></tr>
<tr><th id="149">149</th><td>}</td></tr>
<tr><th id="150">150</th><td></td></tr>
<tr><th id="151">151</th><td><u>#undef <a class="macro" href="../../include/vlc_modules.h.html#51" data-ref="_M/module_stop">module_stop</a></u></td></tr>
<tr><th id="152">152</th><td><em>void</em> <dfn class="decl def" id="module_stop" title='module_stop' data-ref="module_stop">module_stop</dfn> (<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col3 decl" id="43obj" title='obj' data-type='vlc_object_t *' data-ref="43obj">obj</dfn>, <em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col4 decl" id="44m" title='m' data-type='const module_t *' data-ref="44m">m</dfn>)</td></tr>
<tr><th id="153">153</th><td>{</td></tr>
<tr><th id="154">154</th><td>   <em>void</em> (*<dfn class="local col5 decl" id="45deactivate" title='deactivate' data-type='void (*)(vlc_object_t *)' data-ref="45deactivate">deactivate</dfn>) (<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *) = <a class="local col4 ref" href="#44m" title='m' data-ref="44m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::pf_deactivate" title='module_t::pf_deactivate' data-ref="module_t::pf_deactivate">pf_deactivate</a>;</td></tr>
<tr><th id="155">155</th><td></td></tr>
<tr><th id="156">156</th><td>    <b>if</b> (<a class="local col5 ref" href="#45deactivate" title='deactivate' data-ref="45deactivate">deactivate</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="157">157</th><td>        <a class="local col5 ref" href="#45deactivate" title='deactivate' data-ref="45deactivate">deactivate</a> (<a class="local col3 ref" href="#43obj" title='obj' data-ref="43obj">obj</a>);</td></tr>
<tr><th id="158">158</th><td>}</td></tr>
<tr><th id="159">159</th><td></td></tr>
<tr><th id="160">160</th><td><em>static</em> <span class="macro" title="_Bool" data-ref="_M/bool">bool</span> <dfn class="tu decl def" id="module_match_name" title='module_match_name' data-type='_Bool module_match_name(const module_t * m, const char * name)' data-ref="module_match_name">module_match_name</dfn> (<em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col6 decl" id="46m" title='m' data-type='const module_t *' data-ref="46m">m</dfn>, <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="47name" title='name' data-type='const char *' data-ref="47name">name</dfn>)</td></tr>
<tr><th id="161">161</th><td>{</td></tr>
<tr><th id="162">162</th><td>     <i>/* Plugins with zero score must be matched explicitly. */</i></td></tr>
<tr><th id="163">163</th><td>     <b>if</b> (!<a class="ref" href="../../../include/string.h.html#strcasecmp" title='strcasecmp' data-ref="strcasecmp">strcasecmp</a> (<q>"any"</q>, <a class="local col7 ref" href="#47name" title='name' data-ref="47name">name</a>))</td></tr>
<tr><th id="164">164</th><td>         <b>return</b> <a class="local col6 ref" href="#46m" title='m' data-ref="46m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::i_score" title='module_t::i_score' data-ref="module_t::i_score">i_score</a> &gt; <var>0</var>;</td></tr>
<tr><th id="165">165</th><td></td></tr>
<tr><th id="166">166</th><td>     <b>for</b> (<em>unsigned</em> <dfn class="local col8 decl" id="48i" title='i' data-type='unsigned int' data-ref="48i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#48i" title='i' data-ref="48i">i</a> &lt; <a class="local col6 ref" href="#46m" title='m' data-ref="46m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::i_shortcuts" title='module_t::i_shortcuts' data-ref="module_t::i_shortcuts">i_shortcuts</a>; <a class="local col8 ref" href="#48i" title='i' data-ref="48i">i</a>++)</td></tr>
<tr><th id="167">167</th><td>          <b>if</b> (!<a class="ref" href="../../../include/string.h.html#strcasecmp" title='strcasecmp' data-ref="strcasecmp">strcasecmp</a> (<a class="local col6 ref" href="#46m" title='m' data-ref="46m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::pp_shortcuts" title='module_t::pp_shortcuts' data-ref="module_t::pp_shortcuts">pp_shortcuts</a>[<a class="local col8 ref" href="#48i" title='i' data-ref="48i">i</a>], <a class="local col7 ref" href="#47name" title='name' data-ref="47name">name</a>))</td></tr>
<tr><th id="168">168</th><td>              <b>return</b> <span class="macro" title="1" data-ref="_M/true">true</span>;</td></tr>
<tr><th id="169">169</th><td>     <b>return</b> <span class="macro" title="0" data-ref="_M/false">false</span>;</td></tr>
<tr><th id="170">170</th><td>}</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="module_load" title='module_load' data-type='int module_load(vlc_object_t * obj, module_t * m, vlc_activate_t init, __va_list_tag * args)' data-ref="module_load">module_load</dfn> (<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col9 decl" id="49obj" title='obj' data-type='vlc_object_t *' data-ref="49obj">obj</dfn>, <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col0 decl" id="50m" title='m' data-type='module_t *' data-ref="50m">m</dfn>,</td></tr>
<tr><th id="173">173</th><td>                        <a class="typedef" href="../../include/vlc_modules.h.html#vlc_activate_t" title='vlc_activate_t' data-type='int (*)(void *, __va_list_tag *)' data-ref="vlc_activate_t">vlc_activate_t</a> <dfn class="local col1 decl" id="51init" title='init' data-type='vlc_activate_t' data-ref="51init">init</dfn>, <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col2 decl" id="52args" title='args' data-type='__va_list_tag *' data-ref="52args">args</dfn>)</td></tr>
<tr><th id="174">174</th><td>{</td></tr>
<tr><th id="175">175</th><td>    <em>int</em> <dfn class="local col3 decl" id="53ret" title='ret' data-type='int' data-ref="53ret">ret</dfn> = <a class="macro" href="../../include/vlc_common.h.html#374" title="(-0)" data-ref="_M/VLC_SUCCESS">VLC_SUCCESS</a>;</td></tr>
<tr><th id="176">176</th><td></td></tr>
<tr><th id="177">177</th><td>    <b>if</b> (<a class="ref" href="modules.h.html#module_Map" title='module_Map' data-ref="module_Map">module_Map</a> (<a class="local col9 ref" href="#49obj" title='obj' data-ref="49obj">obj</a>, <a class="local col0 ref" href="#50m" title='m' data-ref="50m">m</a>))</td></tr>
<tr><th id="178">178</th><td>        <b>return</b> <a class="macro" href="../../include/vlc_common.h.html#375" title="(-1)" data-ref="_M/VLC_EGENERIC">VLC_EGENERIC</a>;</td></tr>
<tr><th id="179">179</th><td></td></tr>
<tr><th id="180">180</th><td>    <b>if</b> (<a class="local col0 ref" href="#50m" title='m' data-ref="50m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::pf_activate" title='module_t::pf_activate' data-ref="module_t::pf_activate">pf_activate</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="181">181</th><td>    {</td></tr>
<tr><th id="182">182</th><td>        <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col4 decl" id="54ap" title='ap' data-type='va_list' data-ref="54ap">ap</dfn>;</td></tr>
<tr><th id="183">183</th><td></td></tr>
<tr><th id="184">184</th><td>        <span class="macro" title="__builtin_va_copy(ap, args)" data-ref="_M/va_copy">va_copy</span> (<a class="local col4 ref" href="#54ap" title='ap' data-ref="54ap">ap</a>, <a class="local col2 ref" href="#52args" title='args' data-ref="52args">args</a>);</td></tr>
<tr><th id="185">185</th><td>        <a class="local col3 ref" href="#53ret" title='ret' data-ref="53ret">ret</a> = <a class="local col1 ref" href="#51init" title='init' data-ref="51init">init</a> (<a class="local col0 ref" href="#50m" title='m' data-ref="50m">m</a>-&gt;<a class="ref" href="modules.h.html#module_t::pf_activate" title='module_t::pf_activate' data-ref="module_t::pf_activate">pf_activate</a>, <a class="local col4 ref" href="#54ap" title='ap' data-ref="54ap">ap</a>);</td></tr>
<tr><th id="186">186</th><td>        <span class="macro" title="__builtin_va_end(ap)" data-ref="_M/va_end">va_end</span> (<a class="local col4 ref" href="#54ap" title='ap' data-ref="54ap">ap</a>);</td></tr>
<tr><th id="187">187</th><td>    }</td></tr>
<tr><th id="188">188</th><td>    <b>return</b> <a class="local col3 ref" href="#53ret" title='ret' data-ref="53ret">ret</a>;</td></tr>
<tr><th id="189">189</th><td>}</td></tr>
<tr><th id="190">190</th><td></td></tr>
<tr><th id="191">191</th><td><u>#undef <a class="macro" href="../../include/vlc_modules.h.html#37" data-ref="_M/vlc_module_load">vlc_module_load</a></u></td></tr>
<tr><th id="192">192</th><td><i class="doc">/**</i></td></tr>
<tr><th id="193">193</th><td><i class="doc"> * Finds and instantiates the best module of a certain type.</i></td></tr>
<tr><th id="194">194</th><td><i class="doc"> * All candidates modules having the specified capability and name will be</i></td></tr>
<tr><th id="195">195</th><td><i class="doc"> * sorted in decreasing order of priority. Then the probe callback will be</i></td></tr>
<tr><th id="196">196</th><td><i class="doc"> * invoked for each module, until it succeeds (returns 0), or all candidate</i></td></tr>
<tr><th id="197">197</th><td><i class="doc"> * module failed to initialize.</i></td></tr>
<tr><th id="198">198</th><td><i class="doc"> *</i></td></tr>
<tr><th id="199">199</th><td><i class="doc"> * The probe callback first parameter is the address of the module entry point.</i></td></tr>
<tr><th id="200">200</th><td><i class="doc"> * Further parameters are passed as an argument list; it corresponds to the</i></td></tr>
<tr><th id="201">201</th><td><i class="doc"> * variable arguments passed to this function. This scheme is meant to</i></td></tr>
<tr><th id="202">202</th><td><i class="doc"> * support arbitrary prototypes for the module entry point.</i></td></tr>
<tr><th id="203">203</th><td><i class="doc"> *</i></td></tr>
<tr><th id="204">204</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">obj</span> VLC object</i></td></tr>
<tr><th id="205">205</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">capability</span> capability, i.e. class of module</i></td></tr>
<tr><th id="206">206</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">name</span> name name of the module asked, if any</i></td></tr>
<tr><th id="207">207</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">strict</span> if true, do not fallback to plugin with a different name</i></td></tr>
<tr><th id="208">208</th><td><i class="doc"> *                 but the same capability</i></td></tr>
<tr><th id="209">209</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">probe</span> module probe callback</i></td></tr>
<tr><th id="210">210</th><td><i class="doc"> * <span class="command">\return</span> the module or NULL in case of a failure</i></td></tr>
<tr><th id="211">211</th><td><i class="doc"> */</i></td></tr>
<tr><th id="212">212</th><td><a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="decl def" id="vlc_module_load" title='vlc_module_load' data-ref="vlc_module_load">vlc_module_load</dfn>(<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col5 decl" id="55obj" title='obj' data-type='vlc_object_t *' data-ref="55obj">obj</dfn>, <em>const</em> <em>char</em> *<dfn class="local col6 decl" id="56capability" title='capability' data-type='const char *' data-ref="56capability">capability</dfn>,</td></tr>
<tr><th id="213">213</th><td>                          <em>const</em> <em>char</em> *<dfn class="local col7 decl" id="57name" title='name' data-type='const char *' data-ref="57name">name</dfn>, <span class="macro" title="_Bool" data-ref="_M/bool">bool</span> <dfn class="local col8 decl" id="58strict" title='strict' data-type='_Bool' data-ref="58strict">strict</dfn>,</td></tr>
<tr><th id="214">214</th><td>                          <a class="typedef" href="../../include/vlc_modules.h.html#vlc_activate_t" title='vlc_activate_t' data-type='int (*)(void *, __va_list_tag *)' data-ref="vlc_activate_t">vlc_activate_t</a> <dfn class="local col9 decl" id="59probe" title='probe' data-type='vlc_activate_t' data-ref="59probe">probe</dfn>, ...)</td></tr>
<tr><th id="215">215</th><td>{</td></tr>
<tr><th id="216">216</th><td>    <em>char</em> *<dfn class="local col0 decl" id="60var" title='var' data-type='char *' data-ref="60var">var</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="217">217</th><td></td></tr>
<tr><th id="218">218</th><td>    <b>if</b> (<a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a>[<var>0</var>] == <kbd>'\0'</kbd>)</td></tr>
<tr><th id="219">219</th><td>        <a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a> = <q>"any"</q>;</td></tr>
<tr><th id="220">220</th><td></td></tr>
<tr><th id="221">221</th><td>    <i>/* Deal with variables */</i></td></tr>
<tr><th id="222">222</th><td>    <b>if</b> (<a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a>[<var>0</var>] == <kbd>'$'</kbd>)</td></tr>
<tr><th id="223">223</th><td>    {</td></tr>
<tr><th id="224">224</th><td>        <a class="local col0 ref" href="#60var" title='var' data-ref="60var">var</a> = <a class="macro" href="../../include/vlc_variables.h.html#714" title="var_InheritString(__builtin_choose_expr( __builtin_offsetof(__typeof__(*(obj)), psz_object_type), (void)0 , (vlc_object_t *)(obj)), name + 1)" data-ref="_M/var_InheritString">var_InheritString</a> (<a class="local col5 ref" href="#55obj" title='obj' data-ref="55obj">obj</a>, <a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a> + <var>1</var>);</td></tr>
<tr><th id="225">225</th><td>        <a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a> = (<a class="local col0 ref" href="#60var" title='var' data-ref="60var">var</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) ? <a class="local col0 ref" href="#60var" title='var' data-ref="60var">var</a> : <q>"any"</q>;</td></tr>
<tr><th id="226">226</th><td>    }</td></tr>
<tr><th id="227">227</th><td></td></tr>
<tr><th id="228">228</th><td>    <i>/* Find matching modules */</i></td></tr>
<tr><th id="229">229</th><td>    <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> **<dfn class="local col1 decl" id="61mods" title='mods' data-type='module_t **' data-ref="61mods">mods</dfn>;</td></tr>
<tr><th id="230">230</th><td>    <a class="typedef" href="../../../include/x86_64-linux-gnu/sys/types.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="local col2 decl" id="62total" title='total' data-type='ssize_t' data-ref="62total">total</dfn> = <a class="ref" href="modules.h.html#module_list_cap" title='module_list_cap' data-ref="module_list_cap">module_list_cap</a> (&amp;<a class="local col1 ref" href="#61mods" title='mods' data-ref="61mods">mods</a>, <a class="local col6 ref" href="#56capability" title='capability' data-ref="56capability">capability</a>);</td></tr>
<tr><th id="231">231</th><td></td></tr>
<tr><th id="232">232</th><td>    <a class="macro" href="../../include/vlc_messages.h.html#77" title="vlc_Log( __builtin_choose_expr( __builtin_offsetof(__typeof__(*(obj)), psz_object_type), (void)0 , (vlc_object_t *)(obj)), VLC_MSG_DBG, core, &quot;looking for %s module matching \&quot;%s\&quot;: %zd candidates&quot;, capability, name, total )" data-ref="_M/msg_Dbg">msg_Dbg</a> (obj, <q>"looking for %s module matching \"%s\": %zd candidates"</q>,</td></tr>
<tr><th id="233">233</th><td>             capability, name, total);</td></tr>
<tr><th id="234">234</th><td>    <b>if</b> (<a class="local col2 ref" href="#62total" title='total' data-ref="62total">total</a> &lt;= <var>0</var>)</td></tr>
<tr><th id="235">235</th><td>    {</td></tr>
<tr><th id="236">236</th><td>        <a class="ref" href="../../include/vlc_modules.h.html#module_list_free" title='module_list_free' data-ref="module_list_free">module_list_free</a> (<a class="local col1 ref" href="#61mods" title='mods' data-ref="61mods">mods</a>);</td></tr>
<tr><th id="237">237</th><td>        <a class="macro" href="../../include/vlc_messages.h.html#77" title="vlc_Log( __builtin_choose_expr( __builtin_offsetof(__typeof__(*(obj)), psz_object_type), (void)0 , (vlc_object_t *)(obj)), VLC_MSG_DBG, core, &quot;no %s modules&quot;, capability )" data-ref="_M/msg_Dbg">msg_Dbg</a> (obj, <q>"no %s modules"</q>, capability);</td></tr>
<tr><th id="238">238</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="239">239</th><td>    }</td></tr>
<tr><th id="240">240</th><td></td></tr>
<tr><th id="241">241</th><td>    <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col3 decl" id="63module" title='module' data-type='module_t *' data-ref="63module">module</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="242">242</th><td>    <em>const</em> <span class="macro" title="_Bool" data-ref="_M/bool">bool</span> <dfn class="local col4 decl" id="64b_force_backup" title='b_force_backup' data-type='const _Bool' data-ref="64b_force_backup">b_force_backup</dfn> = <a class="local col5 ref" href="#55obj" title='obj' data-ref="55obj">obj</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::b_force' data-ref="vlc_object_t::b_force">b_force</a>; <i>/* FIXME: remove this */</i></td></tr>
<tr><th id="243">243</th><td>    <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col5 decl" id="65args" title='args' data-type='va_list' data-ref="65args">args</dfn>;</td></tr>
<tr><th id="244">244</th><td></td></tr>
<tr><th id="245">245</th><td>    <span class="macro" title="__builtin_va_start(args, probe)" data-ref="_M/va_start">va_start</span>(<a class="local col5 ref" href="#65args" title='args' data-ref="65args">args</a>, <a class="local col9 ref" href="#59probe" title='probe' data-ref="59probe">probe</a>);</td></tr>
<tr><th id="246">246</th><td>    <b>while</b> (*<a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a>)</td></tr>
<tr><th id="247">247</th><td>    {</td></tr>
<tr><th id="248">248</th><td>        <em>char</em> <dfn class="local col6 decl" id="66buf" title='buf' data-type='char [32]' data-ref="66buf">buf</dfn>[<var>32</var>];</td></tr>
<tr><th id="249">249</th><td>        <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col7 decl" id="67slen" title='slen' data-type='size_t' data-ref="67slen">slen</dfn> = <a class="macro" href="../../../include/x86_64-linux-gnu/bits/string2.h.html#911" title="__extension__ ({ char __r0, __r1, __r2; (__builtin_constant_p (&quot;,&quot;) &amp;&amp; ((size_t)(const void *)((&quot;,&quot;) + 1) - (size_t)(const void *)(&quot;,&quot;) == 1) ? ((__builtin_constant_p (name) &amp;&amp; ((size_t)(const void *)((name) + 1) - (size_t)(const void *)(name) == 1)) ? __builtin_strcspn (name, &quot;,&quot;) : ((__r0 = ((const char *) (&quot;,&quot;))[0], __r0 == &apos;\0&apos;) ? strlen (name) : ((__r1 = ((const char *) (&quot;,&quot;))[1], __r1 == &apos;\0&apos;) ? __strcspn_c1 (name, __r0) : ((__r2 = ((const char *) (&quot;,&quot;))[2], __r2 == &apos;\0&apos;) ? __strcspn_c2 (name, __r0, __r1) : (((const char *) (&quot;,&quot;))[3] == &apos;\0&apos; ? __strcspn_c3 (name, __r0, __r1, __r2) : __builtin_strcspn (name, &quot;,&quot;)))))) : __builtin_strcspn (name, &quot;,&quot;)); })" data-ref="_M/strcspn">strcspn</a> (<a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a>, <q>","</q>);</td></tr>
<tr><th id="250">250</th><td></td></tr>
<tr><th id="251">251</th><td>        <b>if</b> (<a class="macro" href="../../include/vlc_common.h.html#115" title="__builtin_expect(!!(slen &lt; sizeof (buf)), 1)" data-ref="_M/likely">likely</a>(<a class="local col7 ref" href="#67slen" title='slen' data-ref="67slen">slen</a> &lt; <b>sizeof</b> (<a class="local col6 ref" href="#66buf" title='buf' data-ref="66buf">buf</a>)))</td></tr>
<tr><th id="252">252</th><td>        {</td></tr>
<tr><th id="253">253</th><td>            <a class="ref" href="../../../include/string.h.html#memcpy" title='memcpy' data-ref="memcpy">memcpy</a>(<a class="local col6 ref" href="#66buf" title='buf' data-ref="66buf">buf</a>, <a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a>, <a class="local col7 ref" href="#67slen" title='slen' data-ref="67slen">slen</a>);</td></tr>
<tr><th id="254">254</th><td>            <a class="local col6 ref" href="#66buf" title='buf' data-ref="66buf">buf</a>[<a class="local col7 ref" href="#67slen" title='slen' data-ref="67slen">slen</a>] = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="255">255</th><td>        }</td></tr>
<tr><th id="256">256</th><td>        <a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a> += <a class="local col7 ref" href="#67slen" title='slen' data-ref="67slen">slen</a>;</td></tr>
<tr><th id="257">257</th><td>        <a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a> += <a class="macro" href="../../../include/x86_64-linux-gnu/bits/string2.h.html#987" title="__extension__ ({ char __a0, __a1, __a2; (__builtin_constant_p (&quot;,&quot;) &amp;&amp; ((size_t)(const void *)((&quot;,&quot;) + 1) - (size_t)(const void *)(&quot;,&quot;) == 1) ? ((__builtin_constant_p (name) &amp;&amp; ((size_t)(const void *)((name) + 1) - (size_t)(const void *)(name) == 1)) ? __builtin_strspn (name, &quot;,&quot;) : ((__a0 = ((const char *) (&quot;,&quot;))[0], __a0 == &apos;\0&apos;) ? ((void) (name), (size_t) 0) : ((__a1 = ((const char *) (&quot;,&quot;))[1], __a1 == &apos;\0&apos;) ? __strspn_c1 (name, __a0) : ((__a2 = ((const char *) (&quot;,&quot;))[2], __a2 == &apos;\0&apos;) ? __strspn_c2 (name, __a0, __a1) : (((const char *) (&quot;,&quot;))[3] == &apos;\0&apos; ? __strspn_c3 (name, __a0, __a1, __a2) : __builtin_strspn (name, &quot;,&quot;)))))) : __builtin_strspn (name, &quot;,&quot;)); })" data-ref="_M/strspn">strspn</a> (<a class="local col7 ref" href="#57name" title='name' data-ref="57name">name</a>, <q>","</q>);</td></tr>
<tr><th id="258">258</th><td>        <b>if</b> (<a class="macro" href="../../include/vlc_common.h.html#116" title="__builtin_expect(!!(slen &gt;= sizeof (buf)), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col7 ref" href="#67slen" title='slen' data-ref="67slen">slen</a> &gt;= <b>sizeof</b> (<a class="local col6 ref" href="#66buf" title='buf' data-ref="66buf">buf</a>)))</td></tr>
<tr><th id="259">259</th><td>            <b>continue</b>;</td></tr>
<tr><th id="260">260</th><td></td></tr>
<tr><th id="261">261</th><td>        <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="68shortcut" title='shortcut' data-type='const char *' data-ref="68shortcut">shortcut</dfn> = <a class="local col6 ref" href="#66buf" title='buf' data-ref="66buf">buf</a>;</td></tr>
<tr><th id="262">262</th><td>        <a class="macro" href="../../../include/assert.h.html#88" title="((shortcut != ((void*)0)) ? (void) (0) : __assert_fail (&quot;shortcut != ((void*)0)&quot;, &quot;/usr/local/google/home/robertshih/git/vlc/src/modules/modules.c&quot;, 262, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a> (<a class="local col8 ref" href="#68shortcut" title='shortcut' data-ref="68shortcut">shortcut</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="263">263</th><td></td></tr>
<tr><th id="264">264</th><td>        <b>if</b> (!<a class="ref" href="../../../include/string.h.html#strcasecmp" title='strcasecmp' data-ref="strcasecmp">strcasecmp</a> (<q>"none"</q>, <a class="local col8 ref" href="#68shortcut" title='shortcut' data-ref="68shortcut">shortcut</a>))</td></tr>
<tr><th id="265">265</th><td>            <b>goto</b> <a class="lbl" href="#69done" data-ref="69done">done</a>;</td></tr>
<tr><th id="266">266</th><td></td></tr>
<tr><th id="267">267</th><td>        <a class="local col5 ref" href="#55obj" title='obj' data-ref="55obj">obj</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::b_force' data-ref="vlc_object_t::b_force">b_force</a> = <a class="local col8 ref" href="#58strict" title='strict' data-ref="58strict">strict</a> &amp;&amp; <a class="ref" href="../../../include/string.h.html#strcasecmp" title='strcasecmp' data-ref="strcasecmp">strcasecmp</a> (<q>"any"</q>, <a class="local col8 ref" href="#68shortcut" title='shortcut' data-ref="68shortcut">shortcut</a>);</td></tr>
<tr><th id="268">268</th><td>        <b>for</b> (<a class="typedef" href="../../../include/x86_64-linux-gnu/sys/types.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="local col0 decl" id="70i" title='i' data-type='ssize_t' data-ref="70i">i</dfn> = <var>0</var>; <a class="local col0 ref" href="#70i" title='i' data-ref="70i">i</a> &lt; <a class="local col2 ref" href="#62total" title='total' data-ref="62total">total</a>; <a class="local col0 ref" href="#70i" title='i' data-ref="70i">i</a>++)</td></tr>
<tr><th id="269">269</th><td>        {</td></tr>
<tr><th id="270">270</th><td>            <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col1 decl" id="71cand" title='cand' data-type='module_t *' data-ref="71cand">cand</dfn> = <a class="local col1 ref" href="#61mods" title='mods' data-ref="61mods">mods</a>[<a class="local col0 ref" href="#70i" title='i' data-ref="70i">i</a>];</td></tr>
<tr><th id="271">271</th><td>            <b>if</b> (<a class="local col1 ref" href="#71cand" title='cand' data-ref="71cand">cand</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="272">272</th><td>                <b>continue</b>; <i>// module failed in previous iteration</i></td></tr>
<tr><th id="273">273</th><td>            <b>if</b> (!<a class="tu ref" href="#module_match_name" title='module_match_name' data-use='c' data-ref="module_match_name">module_match_name</a> (<a class="local col1 ref" href="#71cand" title='cand' data-ref="71cand">cand</a>, <a class="local col8 ref" href="#68shortcut" title='shortcut' data-ref="68shortcut">shortcut</a>))</td></tr>
<tr><th id="274">274</th><td>                <b>continue</b>;</td></tr>
<tr><th id="275">275</th><td>            <a class="local col1 ref" href="#61mods" title='mods' data-ref="61mods">mods</a>[<a class="local col0 ref" href="#70i" title='i' data-ref="70i">i</a>] = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <i>// only try each module once at most...</i></td></tr>
<tr><th id="276">276</th><td></td></tr>
<tr><th id="277">277</th><td>            <em>int</em> <dfn class="local col2 decl" id="72ret" title='ret' data-type='int' data-ref="72ret">ret</dfn> = <a class="tu ref" href="#module_load" title='module_load' data-use='c' data-ref="module_load">module_load</a> (<a class="local col5 ref" href="#55obj" title='obj' data-ref="55obj">obj</a>, <a class="local col1 ref" href="#71cand" title='cand' data-ref="71cand">cand</a>, <a class="local col9 ref" href="#59probe" title='probe' data-ref="59probe">probe</a>, <a class="local col5 ref" href="#65args" title='args' data-ref="65args">args</a>);</td></tr>
<tr><th id="278">278</th><td>            <b>switch</b> (<a class="local col2 ref" href="#72ret" title='ret' data-ref="72ret">ret</a>)</td></tr>
<tr><th id="279">279</th><td>            {</td></tr>
<tr><th id="280">280</th><td>                <b>case</b> <a class="macro" href="../../include/vlc_common.h.html#374" title="(-0)" data-ref="_M/VLC_SUCCESS">VLC_SUCCESS</a>:</td></tr>
<tr><th id="281">281</th><td>                    <a class="local col3 ref" href="#63module" title='module' data-ref="63module">module</a> = <a class="local col1 ref" href="#71cand" title='cand' data-ref="71cand">cand</a>;</td></tr>
<tr><th id="282">282</th><td>                    <i>/* fall through */</i></td></tr>
<tr><th id="283">283</th><td>                <b>case</b> <a class="macro" href="../../include/vlc_common.h.html#377" title="(-3)" data-ref="_M/VLC_ETIMEOUT">VLC_ETIMEOUT</a>:</td></tr>
<tr><th id="284">284</th><td>                    <b>goto</b> <a class="lbl" href="#69done" data-ref="69done">done</a>;</td></tr>
<tr><th id="285">285</th><td>            }</td></tr>
<tr><th id="286">286</th><td>        }</td></tr>
<tr><th id="287">287</th><td>    }</td></tr>
<tr><th id="288">288</th><td></td></tr>
<tr><th id="289">289</th><td>    <i>/* None of the shortcuts matched, fall back to any module */</i></td></tr>
<tr><th id="290">290</th><td>    <b>if</b> (!<a class="local col8 ref" href="#58strict" title='strict' data-ref="58strict">strict</a>)</td></tr>
<tr><th id="291">291</th><td>    {</td></tr>
<tr><th id="292">292</th><td>        <a class="local col5 ref" href="#55obj" title='obj' data-ref="55obj">obj</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::b_force' data-ref="vlc_object_t::b_force">b_force</a> = <span class="macro" title="0" data-ref="_M/false">false</span>;</td></tr>
<tr><th id="293">293</th><td>        <b>for</b> (<a class="typedef" href="../../../include/x86_64-linux-gnu/sys/types.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="local col3 decl" id="73i" title='i' data-type='ssize_t' data-ref="73i">i</dfn> = <var>0</var>; <a class="local col3 ref" href="#73i" title='i' data-ref="73i">i</a> &lt; <a class="local col2 ref" href="#62total" title='total' data-ref="62total">total</a>; <a class="local col3 ref" href="#73i" title='i' data-ref="73i">i</a>++)</td></tr>
<tr><th id="294">294</th><td>        {</td></tr>
<tr><th id="295">295</th><td>            <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col4 decl" id="74cand" title='cand' data-type='module_t *' data-ref="74cand">cand</dfn> = <a class="local col1 ref" href="#61mods" title='mods' data-ref="61mods">mods</a>[<a class="local col3 ref" href="#73i" title='i' data-ref="73i">i</a>];</td></tr>
<tr><th id="296">296</th><td>            <b>if</b> (<a class="local col4 ref" href="#74cand" title='cand' data-ref="74cand">cand</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> || <a class="ref" href="#module_get_score" title='module_get_score' data-ref="module_get_score">module_get_score</a> (<a class="local col4 ref" href="#74cand" title='cand' data-ref="74cand">cand</a>) &lt;= <var>0</var>)</td></tr>
<tr><th id="297">297</th><td>                <b>continue</b>;</td></tr>
<tr><th id="298">298</th><td></td></tr>
<tr><th id="299">299</th><td>            <em>int</em> <dfn class="local col5 decl" id="75ret" title='ret' data-type='int' data-ref="75ret">ret</dfn> = <a class="tu ref" href="#module_load" title='module_load' data-use='c' data-ref="module_load">module_load</a> (<a class="local col5 ref" href="#55obj" title='obj' data-ref="55obj">obj</a>, <a class="local col4 ref" href="#74cand" title='cand' data-ref="74cand">cand</a>, <a class="local col9 ref" href="#59probe" title='probe' data-ref="59probe">probe</a>, <a class="local col5 ref" href="#65args" title='args' data-ref="65args">args</a>);</td></tr>
<tr><th id="300">300</th><td>            <b>switch</b> (<a class="local col5 ref" href="#75ret" title='ret' data-ref="75ret">ret</a>)</td></tr>
<tr><th id="301">301</th><td>            {</td></tr>
<tr><th id="302">302</th><td>                <b>case</b> <a class="macro" href="../../include/vlc_common.h.html#374" title="(-0)" data-ref="_M/VLC_SUCCESS">VLC_SUCCESS</a>:</td></tr>
<tr><th id="303">303</th><td>                    <a class="local col3 ref" href="#63module" title='module' data-ref="63module">module</a> = <a class="local col4 ref" href="#74cand" title='cand' data-ref="74cand">cand</a>;</td></tr>
<tr><th id="304">304</th><td>                    <i>/* fall through */</i></td></tr>
<tr><th id="305">305</th><td>                <b>case</b> <a class="macro" href="../../include/vlc_common.h.html#377" title="(-3)" data-ref="_M/VLC_ETIMEOUT">VLC_ETIMEOUT</a>:</td></tr>
<tr><th id="306">306</th><td>                    <b>goto</b> <a class="lbl" href="#69done" data-ref="69done">done</a>;</td></tr>
<tr><th id="307">307</th><td>            }</td></tr>
<tr><th id="308">308</th><td>        }</td></tr>
<tr><th id="309">309</th><td>    }</td></tr>
<tr><th id="310">310</th><td><dfn class="lbl" id="69done" data-ref="69done">done</dfn>:</td></tr>
<tr><th id="311">311</th><td>    <span class="macro" title="__builtin_va_end(args)" data-ref="_M/va_end">va_end</span> (<a class="local col5 ref" href="#65args" title='args' data-ref="65args">args</a>);</td></tr>
<tr><th id="312">312</th><td>    <a class="local col5 ref" href="#55obj" title='obj' data-ref="55obj">obj</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::b_force' data-ref="vlc_object_t::b_force">b_force</a> = <a class="local col4 ref" href="#64b_force_backup" title='b_force_backup' data-ref="64b_force_backup">b_force_backup</a>;</td></tr>
<tr><th id="313">313</th><td>    <a class="ref" href="../../include/vlc_modules.h.html#module_list_free" title='module_list_free' data-ref="module_list_free">module_list_free</a> (<a class="local col1 ref" href="#61mods" title='mods' data-ref="61mods">mods</a>);</td></tr>
<tr><th id="314">314</th><td>    <a class="ref" href="../../../include/stdlib.h.html#free" title='free' data-ref="free">free</a> (<a class="local col0 ref" href="#60var" title='var' data-ref="60var">var</a>);</td></tr>
<tr><th id="315">315</th><td></td></tr>
<tr><th id="316">316</th><td>    <b>if</b> (<a class="local col3 ref" href="#63module" title='module' data-ref="63module">module</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="317">317</th><td>    {</td></tr>
<tr><th id="318">318</th><td>        <a class="macro" href="../../include/vlc_messages.h.html#77" title="vlc_Log( __builtin_choose_expr( __builtin_offsetof(__typeof__(*(obj)), psz_object_type), (void)0 , (vlc_object_t *)(obj)), VLC_MSG_DBG, core, &quot;using %s module \&quot;%s\&quot;&quot;, capability, module_get_object (module) )" data-ref="_M/msg_Dbg">msg_Dbg</a> (obj, <q>"using %s module \"%s\""</q>, capability,</td></tr>
<tr><th id="319">319</th><td>                 module_get_object (module));</td></tr>
<tr><th id="320">320</th><td>        <a class="macro" href="../libvlc.h.html#121" title="vlc_object_set_name(__builtin_choose_expr( __builtin_offsetof(__typeof__(*(obj)), psz_object_type), (void)0 , (vlc_object_t *)(obj)), module_get_object (module))" data-ref="_M/vlc_object_set_name">vlc_object_set_name</a> (<a class="local col5 ref" href="#55obj" title='obj' data-ref="55obj">obj</a>, <a class="ref" href="#module_get_object" title='module_get_object' data-ref="module_get_object">module_get_object</a> (<a class="local col3 ref" href="#63module" title='module' data-ref="63module">module</a>));</td></tr>
<tr><th id="321">321</th><td>    }</td></tr>
<tr><th id="322">322</th><td>    <b>else</b></td></tr>
<tr><th id="323">323</th><td>        <a class="macro" href="../../include/vlc_messages.h.html#77" title="vlc_Log( __builtin_choose_expr( __builtin_offsetof(__typeof__(*(obj)), psz_object_type), (void)0 , (vlc_object_t *)(obj)), VLC_MSG_DBG, core, &quot;no %s modules matched&quot;, capability )" data-ref="_M/msg_Dbg">msg_Dbg</a> (obj, <q>"no %s modules matched"</q>, capability);</td></tr>
<tr><th id="324">324</th><td>    <b>return</b> <a class="local col3 ref" href="#63module" title='module' data-ref="63module">module</a>;</td></tr>
<tr><th id="325">325</th><td>}</td></tr>
<tr><th id="326">326</th><td></td></tr>
<tr><th id="327">327</th><td></td></tr>
<tr><th id="328">328</th><td><i class="doc">/**</i></td></tr>
<tr><th id="329">329</th><td><i class="doc"> * Deinstantiates a module.</i></td></tr>
<tr><th id="330">330</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">module</span> the module pointer as returned by vlc_module_load()</i></td></tr>
<tr><th id="331">331</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">deinit</span> deactivation callback</i></td></tr>
<tr><th id="332">332</th><td><i class="doc"> */</i></td></tr>
<tr><th id="333">333</th><td><em>void</em> <dfn class="decl def" id="vlc_module_unload" title='vlc_module_unload' data-ref="vlc_module_unload">vlc_module_unload</dfn>(<a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col6 decl" id="76module" title='module' data-type='module_t *' data-ref="76module">module</dfn>, <a class="typedef" href="../../include/vlc_modules.h.html#vlc_deactivate_t" title='vlc_deactivate_t' data-type='void (*)(void *, __va_list_tag *)' data-ref="vlc_deactivate_t">vlc_deactivate_t</a> <dfn class="local col7 decl" id="77deinit" title='deinit' data-type='vlc_deactivate_t' data-ref="77deinit">deinit</dfn>, ...)</td></tr>
<tr><th id="334">334</th><td>{</td></tr>
<tr><th id="335">335</th><td>    <b>if</b> (<a class="local col6 ref" href="#76module" title='module' data-ref="76module">module</a>-&gt;<a class="ref" href="modules.h.html#module_t::pf_deactivate" title='module_t::pf_deactivate' data-ref="module_t::pf_deactivate">pf_deactivate</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="336">336</th><td>    {</td></tr>
<tr><th id="337">337</th><td>        <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col8 decl" id="78ap" title='ap' data-type='va_list' data-ref="78ap">ap</dfn>;</td></tr>
<tr><th id="338">338</th><td></td></tr>
<tr><th id="339">339</th><td>        <span class="macro" title="__builtin_va_start(ap, deinit)" data-ref="_M/va_start">va_start</span>(<a class="local col8 ref" href="#78ap" title='ap' data-ref="78ap">ap</a>, <a class="local col7 ref" href="#77deinit" title='deinit' data-ref="77deinit">deinit</a>);</td></tr>
<tr><th id="340">340</th><td>        <a class="local col7 ref" href="#77deinit" title='deinit' data-ref="77deinit">deinit</a>(<a class="local col6 ref" href="#76module" title='module' data-ref="76module">module</a>-&gt;<a class="ref" href="modules.h.html#module_t::pf_deactivate" title='module_t::pf_deactivate' data-ref="module_t::pf_deactivate">pf_deactivate</a>, <a class="local col8 ref" href="#78ap" title='ap' data-ref="78ap">ap</a>);</td></tr>
<tr><th id="341">341</th><td>        <span class="macro" title="__builtin_va_end(ap)" data-ref="_M/va_end">va_end</span>(<a class="local col8 ref" href="#78ap" title='ap' data-ref="78ap">ap</a>);</td></tr>
<tr><th id="342">342</th><td>    }</td></tr>
<tr><th id="343">343</th><td>}</td></tr>
<tr><th id="344">344</th><td></td></tr>
<tr><th id="345">345</th><td></td></tr>
<tr><th id="346">346</th><td><em>static</em> <em>int</em> <dfn class="tu decl def" id="generic_start" title='generic_start' data-type='int generic_start(void * func, __va_list_tag * ap)' data-ref="generic_start">generic_start</dfn>(<em>void</em> *<dfn class="local col9 decl" id="79func" title='func' data-type='void *' data-ref="79func">func</dfn>, <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col0 decl" id="80ap" title='ap' data-type='__va_list_tag *' data-ref="80ap">ap</dfn>)</td></tr>
<tr><th id="347">347</th><td>{</td></tr>
<tr><th id="348">348</th><td>    <a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col1 decl" id="81obj" title='obj' data-type='vlc_object_t *' data-ref="81obj">obj</dfn> = <span class="macro" title="__builtin_va_arg(ap, vlc_object_t *)" data-ref="_M/va_arg">va_arg</span>(<a class="local col0 ref" href="#80ap" title='ap' data-ref="80ap">ap</a>, <a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *);</td></tr>
<tr><th id="349">349</th><td>    <em>int</em> (*<dfn class="local col2 decl" id="82activate" title='activate' data-type='int (*)(vlc_object_t *)' data-ref="82activate">activate</dfn>)(<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *) = <a class="local col9 ref" href="#79func" title='func' data-ref="79func">func</a>;</td></tr>
<tr><th id="350">350</th><td></td></tr>
<tr><th id="351">351</th><td>    <b>return</b> <a class="local col2 ref" href="#82activate" title='activate' data-ref="82activate">activate</a>(<a class="local col1 ref" href="#81obj" title='obj' data-ref="81obj">obj</a>);</td></tr>
<tr><th id="352">352</th><td>}</td></tr>
<tr><th id="353">353</th><td></td></tr>
<tr><th id="354">354</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="generic_stop" title='generic_stop' data-type='void generic_stop(void * func, __va_list_tag * ap)' data-ref="generic_stop">generic_stop</dfn>(<em>void</em> *<dfn class="local col3 decl" id="83func" title='func' data-type='void *' data-ref="83func">func</dfn>, <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col4 decl" id="84ap" title='ap' data-type='__va_list_tag *' data-ref="84ap">ap</dfn>)</td></tr>
<tr><th id="355">355</th><td>{</td></tr>
<tr><th id="356">356</th><td>    <a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col5 decl" id="85obj" title='obj' data-type='vlc_object_t *' data-ref="85obj">obj</dfn> = <span class="macro" title="__builtin_va_arg(ap, vlc_object_t *)" data-ref="_M/va_arg">va_arg</span>(<a class="local col4 ref" href="#84ap" title='ap' data-ref="84ap">ap</a>, <a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *);</td></tr>
<tr><th id="357">357</th><td>    <em>void</em> (*<dfn class="local col6 decl" id="86deactivate" title='deactivate' data-type='void (*)(vlc_object_t *)' data-ref="86deactivate">deactivate</dfn>)(<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *) = <a class="local col3 ref" href="#83func" title='func' data-ref="83func">func</a>;</td></tr>
<tr><th id="358">358</th><td></td></tr>
<tr><th id="359">359</th><td>    <a class="local col6 ref" href="#86deactivate" title='deactivate' data-ref="86deactivate">deactivate</a>(<a class="local col5 ref" href="#85obj" title='obj' data-ref="85obj">obj</a>);</td></tr>
<tr><th id="360">360</th><td>}</td></tr>
<tr><th id="361">361</th><td></td></tr>
<tr><th id="362">362</th><td><u>#undef <a class="macro" href="../../include/vlc_modules.h.html#42" data-ref="_M/module_need">module_need</a></u></td></tr>
<tr><th id="363">363</th><td><a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="decl def" id="module_need" title='module_need' data-ref="module_need">module_need</dfn>(<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col7 decl" id="87obj" title='obj' data-type='vlc_object_t *' data-ref="87obj">obj</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="88cap" title='cap' data-type='const char *' data-ref="88cap">cap</dfn>, <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="89name" title='name' data-type='const char *' data-ref="89name">name</dfn>,</td></tr>
<tr><th id="364">364</th><td>                      <span class="macro" title="_Bool" data-ref="_M/bool">bool</span> <dfn class="local col0 decl" id="90strict" title='strict' data-type='_Bool' data-ref="90strict">strict</dfn>)</td></tr>
<tr><th id="365">365</th><td>{</td></tr>
<tr><th id="366">366</th><td>    <b>return</b> <a class="ref" href="#vlc_module_load" title='vlc_module_load' data-ref="vlc_module_load">vlc_module_load</a>(<a class="local col7 ref" href="#87obj" title='obj' data-ref="87obj">obj</a>, <a class="local col8 ref" href="#88cap" title='cap' data-ref="88cap">cap</a>, <a class="local col9 ref" href="#89name" title='name' data-ref="89name">name</a>, <a class="local col0 ref" href="#90strict" title='strict' data-ref="90strict">strict</a>, <a class="tu ref" href="#generic_start" title='generic_start' data-use='r' data-ref="generic_start">generic_start</a>, <a class="local col7 ref" href="#87obj" title='obj' data-ref="87obj">obj</a>);</td></tr>
<tr><th id="367">367</th><td>}</td></tr>
<tr><th id="368">368</th><td></td></tr>
<tr><th id="369">369</th><td><u>#undef <a class="macro" href="../../include/vlc_modules.h.html#44" data-ref="_M/module_unneed">module_unneed</a></u></td></tr>
<tr><th id="370">370</th><td><em>void</em> <dfn class="decl def" id="module_unneed" title='module_unneed' data-ref="module_unneed">module_unneed</dfn>(<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col1 decl" id="91obj" title='obj' data-type='vlc_object_t *' data-ref="91obj">obj</dfn>, <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col2 decl" id="92module" title='module' data-type='module_t *' data-ref="92module">module</dfn>)</td></tr>
<tr><th id="371">371</th><td>{</td></tr>
<tr><th id="372">372</th><td>    <a class="macro" href="../../include/vlc_messages.h.html#77" title="vlc_Log( __builtin_choose_expr( __builtin_offsetof(__typeof__(*(obj)), psz_object_type), (void)0 , (vlc_object_t *)(obj)), VLC_MSG_DBG, core, &quot;removing module \&quot;%s\&quot;&quot;, module_get_object(module) )" data-ref="_M/msg_Dbg">msg_Dbg</a>(obj, <q>"removing module \"%s\""</q>, module_get_object(module));</td></tr>
<tr><th id="373">373</th><td>    <a class="ref" href="#vlc_module_unload" title='vlc_module_unload' data-ref="vlc_module_unload">vlc_module_unload</a>(<a class="local col2 ref" href="#92module" title='module' data-ref="92module">module</a>, <a class="tu ref" href="#generic_stop" title='generic_stop' data-use='r' data-ref="generic_stop">generic_stop</a>, <a class="local col1 ref" href="#91obj" title='obj' data-ref="91obj">obj</a>);</td></tr>
<tr><th id="374">374</th><td>}</td></tr>
<tr><th id="375">375</th><td></td></tr>
<tr><th id="376">376</th><td><i class="doc">/**</i></td></tr>
<tr><th id="377">377</th><td><i class="doc"> * Get a pointer to a module_t given it's name.</i></td></tr>
<tr><th id="378">378</th><td><i class="doc"> *</i></td></tr>
<tr><th id="379">379</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">name</span> the name of the module</i></td></tr>
<tr><th id="380">380</th><td><i class="doc"> * <span class="command">\return</span> a pointer to the module or NULL in case of a failure</i></td></tr>
<tr><th id="381">381</th><td><i class="doc"> */</i></td></tr>
<tr><th id="382">382</th><td><a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="decl def" id="module_find" title='module_find' data-ref="module_find">module_find</dfn> (<em>const</em> <em>char</em> *<dfn class="local col3 decl" id="93name" title='name' data-type='const char *' data-ref="93name">name</dfn>)</td></tr>
<tr><th id="383">383</th><td>{</td></tr>
<tr><th id="384">384</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col4 decl" id="94count" title='count' data-type='size_t' data-ref="94count">count</dfn>;</td></tr>
<tr><th id="385">385</th><td>    <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> **<dfn class="local col5 decl" id="95list" title='list' data-type='module_t **' data-ref="95list">list</dfn> = <a class="ref" href="../../include/vlc_modules.h.html#module_list_get" title='module_list_get' data-ref="module_list_get">module_list_get</a> (&amp;<a class="local col4 ref" href="#94count" title='count' data-ref="94count">count</a>);</td></tr>
<tr><th id="386">386</th><td></td></tr>
<tr><th id="387">387</th><td>    <a class="macro" href="../../../include/assert.h.html#88" title="((name != ((void*)0)) ? (void) (0) : __assert_fail (&quot;name != ((void*)0)&quot;, &quot;/usr/local/google/home/robertshih/git/vlc/src/modules/modules.c&quot;, 387, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a> (<a class="local col3 ref" href="#93name" title='name' data-ref="93name">name</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="388">388</th><td></td></tr>
<tr><th id="389">389</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col6 decl" id="96i" title='i' data-type='size_t' data-ref="96i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#96i" title='i' data-ref="96i">i</a> &lt; <a class="local col4 ref" href="#94count" title='count' data-ref="94count">count</a>; <a class="local col6 ref" href="#96i" title='i' data-ref="96i">i</a>++)</td></tr>
<tr><th id="390">390</th><td>    {</td></tr>
<tr><th id="391">391</th><td>        <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col7 decl" id="97module" title='module' data-type='module_t *' data-ref="97module">module</dfn> = <a class="local col5 ref" href="#95list" title='list' data-ref="95list">list</a>[<a class="local col6 ref" href="#96i" title='i' data-ref="96i">i</a>];</td></tr>
<tr><th id="392">392</th><td></td></tr>
<tr><th id="393">393</th><td>        <b>if</b> (<a class="macro" href="../../include/vlc_common.h.html#116" title="__builtin_expect(!!(module-&gt;i_shortcuts == 0), 0)" data-ref="_M/unlikely">unlikely</a>(<a class="local col7 ref" href="#97module" title='module' data-ref="97module">module</a>-&gt;<a class="ref" href="modules.h.html#module_t::i_shortcuts" title='module_t::i_shortcuts' data-ref="module_t::i_shortcuts">i_shortcuts</a> == <var>0</var>))</td></tr>
<tr><th id="394">394</th><td>            <b>continue</b>;</td></tr>
<tr><th id="395">395</th><td>        <b>if</b> (!<a class="macro" href="../../../include/x86_64-linux-gnu/bits/string2.h.html#799" title="__extension__ ({ size_t __s1_len, __s2_len; (__builtin_constant_p (module-&gt;pp_shortcuts[0]) &amp;&amp; __builtin_constant_p (name) &amp;&amp; (__s1_len = __builtin_strlen (module-&gt;pp_shortcuts[0]), __s2_len = __builtin_strlen (name), (!((size_t)(const void *)((module-&gt;pp_shortcuts[0]) + 1) - (size_t)(const void *)(module-&gt;pp_shortcuts[0]) == 1) || __s1_len &gt;= 4) &amp;&amp; (!((size_t)(const void *)((name) + 1) - (size_t)(const void *)(name) == 1) || __s2_len &gt;= 4)) ? __builtin_strcmp (module-&gt;pp_shortcuts[0], name) : (__builtin_constant_p (module-&gt;pp_shortcuts[0]) &amp;&amp; ((size_t)(const void *)((module-&gt;pp_shortcuts[0]) + 1) - (size_t)(const void *)(module-&gt;pp_shortcuts[0]) == 1) &amp;&amp; (__s1_len = __builtin_strlen (module-&gt;pp_shortcuts[0]), __s1_len &lt; 4) ? (__builtin_constant_p (name) &amp;&amp; ((size_t)(const void *)((name) + 1) - (size_t)(const void *)(name) == 1) ? __builtin_strcmp (module-&gt;pp_shortcuts[0], name) : (__extension__ ({ const unsigned char *__s2 = (const unsigned char *) (const char *) (name); int __result = (((const unsigned char *) (const char *) (module-&gt;pp_shortcuts[0]))[0] - __s2[0]); if (__s1_len &gt; 0 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (module-&gt;pp_shortcuts[0]))[1] - __s2[1]); if (__s1_len &gt; 1 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (module-&gt;pp_shortcuts[0]))[2] - __s2[2]); if (__s1_len &gt; 2 &amp;&amp; __result == 0) __result = (((const unsigned char *) (const char *) (module-&gt;pp_shortcuts[0]))[3] - __s2[3]); } } __result; }))) : (__builtin_constant_p (name) &amp;&amp; ((size_t)(const void *)((name) + 1) - (size_t)(const void *)(name) == 1) &amp;&amp; (__s2_len = __builtin_strlen (name), __s2_len &lt; 4) ? (__builtin_constant_p (module-&gt;pp_shortcuts[0]) &amp;&amp; ((size_t)(const void *)((module-&gt;pp_shortcuts[0]) + 1) - (size_t)(const void *)(module-&gt;pp_shortcuts[0]) == 1) ? __builtin_strcmp (module-&gt;pp_shortcuts[0], name) : (- (__extension__ ({ const unsigned char *__s2 = (const unsigned char *) (const char *) (module-&gt;pp_shortcuts[0]); int __result = (((const unsigned char *) (const char *) (name))[0] - __s2[0]); if (__s2_len &gt; 0 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (name))[1] - __s2[1]); if (__s2_len &gt; 1 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (name))[2] - __s2[2]); if (__s2_len &gt; 2 &amp;&amp; __result == 0) __result = (((const unsigned char *) (const char *) (name))[3] - __s2[3]); } } __result; })))) : __builtin_strcmp (module-&gt;pp_shortcuts[0], name)))); })" data-ref="_M/strcmp">strcmp</a> (<a class="local col7 ref" href="#97module" title='module' data-ref="97module">module</a>-&gt;<a class="ref" href="modules.h.html#module_t::pp_shortcuts" title='module_t::pp_shortcuts' data-ref="module_t::pp_shortcuts">pp_shortcuts</a>[<var>0</var>], <a class="local col3 ref" href="#93name" title='name' data-ref="93name">name</a>))</td></tr>
<tr><th id="396">396</th><td>        {</td></tr>
<tr><th id="397">397</th><td>            <a class="ref" href="../../include/vlc_modules.h.html#module_list_free" title='module_list_free' data-ref="module_list_free">module_list_free</a> (<a class="local col5 ref" href="#95list" title='list' data-ref="95list">list</a>);</td></tr>
<tr><th id="398">398</th><td>            <b>return</b> <a class="local col7 ref" href="#97module" title='module' data-ref="97module">module</a>;</td></tr>
<tr><th id="399">399</th><td>        }</td></tr>
<tr><th id="400">400</th><td>    }</td></tr>
<tr><th id="401">401</th><td>    <a class="ref" href="../../include/vlc_modules.h.html#module_list_free" title='module_list_free' data-ref="module_list_free">module_list_free</a> (<a class="local col5 ref" href="#95list" title='list' data-ref="95list">list</a>);</td></tr>
<tr><th id="402">402</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="403">403</th><td>}</td></tr>
<tr><th id="404">404</th><td></td></tr>
<tr><th id="405">405</th><td><i class="doc">/**</i></td></tr>
<tr><th id="406">406</th><td><i class="doc"> * Tell if a module exists</i></td></tr>
<tr><th id="407">407</th><td><i class="doc"> *</i></td></tr>
<tr><th id="408">408</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">psz_name</span> th name of the module</i></td></tr>
<tr><th id="409">409</th><td><i class="doc"> * <span class="command">\return</span> TRUE if the module exists</i></td></tr>
<tr><th id="410">410</th><td><i class="doc"> */</i></td></tr>
<tr><th id="411">411</th><td><span class="macro" title="_Bool" data-ref="_M/bool">bool</span> <dfn class="decl def" id="module_exists" title='module_exists' data-ref="module_exists">module_exists</dfn> (<em>const</em> <em>char</em> * <dfn class="local col8 decl" id="98psz_name" title='psz_name' data-type='const char *' data-ref="98psz_name">psz_name</dfn>)</td></tr>
<tr><th id="412">412</th><td>{</td></tr>
<tr><th id="413">413</th><td>    <b>return</b> <a class="ref" href="#module_find" title='module_find' data-ref="module_find">module_find</a> (<a class="local col8 ref" href="#98psz_name" title='psz_name' data-ref="98psz_name">psz_name</a>) != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="414">414</th><td>}</td></tr>
<tr><th id="415">415</th><td></td></tr>
<tr><th id="416">416</th><td><i class="doc">/**</i></td></tr>
<tr><th id="417">417</th><td><i class="doc"> * Get a pointer to a module_t that matches a shortcut.</i></td></tr>
<tr><th id="418">418</th><td><i class="doc"> * This is a temporary hack for SD. Do not re-use (generally multiple modules</i></td></tr>
<tr><th id="419">419</th><td><i class="doc"> * can have the same shortcut, so this is *broken* - use module_need()!).</i></td></tr>
<tr><th id="420">420</th><td><i class="doc"> *</i></td></tr>
<tr><th id="421">421</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">psz_shortcut</span> shortcut of the module</i></td></tr>
<tr><th id="422">422</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">psz_cap</span> capability of the module</i></td></tr>
<tr><th id="423">423</th><td><i class="doc"> * <span class="command">\return</span> a pointer to the module or NULL in case of a failure</i></td></tr>
<tr><th id="424">424</th><td><i class="doc"> */</i></td></tr>
<tr><th id="425">425</th><td><a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="decl def" id="module_find_by_shortcut" title='module_find_by_shortcut' data-ref="module_find_by_shortcut">module_find_by_shortcut</dfn> (<em>const</em> <em>char</em> *<dfn class="local col9 decl" id="99psz_shortcut" title='psz_shortcut' data-type='const char *' data-ref="99psz_shortcut">psz_shortcut</dfn>)</td></tr>
<tr><th id="426">426</th><td>{</td></tr>
<tr><th id="427">427</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col0 decl" id="100count" title='count' data-type='size_t' data-ref="100count">count</dfn>;</td></tr>
<tr><th id="428">428</th><td>    <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> **<dfn class="local col1 decl" id="101list" title='list' data-type='module_t **' data-ref="101list">list</dfn> = <a class="ref" href="../../include/vlc_modules.h.html#module_list_get" title='module_list_get' data-ref="module_list_get">module_list_get</a> (&amp;<a class="local col0 ref" href="#100count" title='count' data-ref="100count">count</a>);</td></tr>
<tr><th id="429">429</th><td></td></tr>
<tr><th id="430">430</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col2 decl" id="102i" title='i' data-type='size_t' data-ref="102i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#102i" title='i' data-ref="102i">i</a> &lt; <a class="local col0 ref" href="#100count" title='count' data-ref="100count">count</a>; <a class="local col2 ref" href="#102i" title='i' data-ref="102i">i</a>++)</td></tr>
<tr><th id="431">431</th><td>    {</td></tr>
<tr><th id="432">432</th><td>        <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col3 decl" id="103module" title='module' data-type='module_t *' data-ref="103module">module</dfn> = <a class="local col1 ref" href="#101list" title='list' data-ref="101list">list</a>[<a class="local col0 ref" href="#100count" title='count' data-ref="100count">count</a>];</td></tr>
<tr><th id="433">433</th><td></td></tr>
<tr><th id="434">434</th><td>        <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col4 decl" id="104j" title='j' data-type='size_t' data-ref="104j">j</dfn> = <var>0</var>; <a class="local col4 ref" href="#104j" title='j' data-ref="104j">j</a> &lt; <a class="local col3 ref" href="#103module" title='module' data-ref="103module">module</a>-&gt;<a class="ref" href="modules.h.html#module_t::i_shortcuts" title='module_t::i_shortcuts' data-ref="module_t::i_shortcuts">i_shortcuts</a>; <a class="local col4 ref" href="#104j" title='j' data-ref="104j">j</a>++)</td></tr>
<tr><th id="435">435</th><td>            <b>if</b> (!<a class="macro" href="../../../include/x86_64-linux-gnu/bits/string2.h.html#799" title="__extension__ ({ size_t __s1_len, __s2_len; (__builtin_constant_p (module-&gt;pp_shortcuts[j]) &amp;&amp; __builtin_constant_p (psz_shortcut) &amp;&amp; (__s1_len = __builtin_strlen (module-&gt;pp_shortcuts[j]), __s2_len = __builtin_strlen (psz_shortcut), (!((size_t)(const void *)((module-&gt;pp_shortcuts[j]) + 1) - (size_t)(const void *)(module-&gt;pp_shortcuts[j]) == 1) || __s1_len &gt;= 4) &amp;&amp; (!((size_t)(const void *)((psz_shortcut) + 1) - (size_t)(const void *)(psz_shortcut) == 1) || __s2_len &gt;= 4)) ? __builtin_strcmp (module-&gt;pp_shortcuts[j], psz_shortcut) : (__builtin_constant_p (module-&gt;pp_shortcuts[j]) &amp;&amp; ((size_t)(const void *)((module-&gt;pp_shortcuts[j]) + 1) - (size_t)(const void *)(module-&gt;pp_shortcuts[j]) == 1) &amp;&amp; (__s1_len = __builtin_strlen (module-&gt;pp_shortcuts[j]), __s1_len &lt; 4) ? (__builtin_constant_p (psz_shortcut) &amp;&amp; ((size_t)(const void *)((psz_shortcut) + 1) - (size_t)(const void *)(psz_shortcut) == 1) ? __builtin_strcmp (module-&gt;pp_shortcuts[j], psz_shortcut) : (__extension__ ({ const unsigned char *__s2 = (const unsigned char *) (const char *) (psz_shortcut); int __result = (((const unsigned char *) (const char *) (module-&gt;pp_shortcuts[j]))[0] - __s2[0]); if (__s1_len &gt; 0 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (module-&gt;pp_shortcuts[j]))[1] - __s2[1]); if (__s1_len &gt; 1 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (module-&gt;pp_shortcuts[j]))[2] - __s2[2]); if (__s1_len &gt; 2 &amp;&amp; __result == 0) __result = (((const unsigned char *) (const char *) (module-&gt;pp_shortcuts[j]))[3] - __s2[3]); } } __result; }))) : (__builtin_constant_p (psz_shortcut) &amp;&amp; ((size_t)(const void *)((psz_shortcut) + 1) - (size_t)(const void *)(psz_shortcut) == 1) &amp;&amp; (__s2_len = __builtin_strlen (psz_shortcut), __s2_len &lt; 4) ? (__builtin_constant_p (module-&gt;pp_shortcuts[j]) &amp;&amp; ((size_t)(const void *)((module-&gt;pp_shortcuts[j]) + 1) - (size_t)(const void *)(module-&gt;pp_shortcuts[j]) == 1) ? __builtin_strcmp (module-&gt;pp_shortcuts[j], psz_shortcut) : (- (__extension__ ({ const unsigned char *__s2 = (const unsigned char *) (const char *) (module-&gt;pp_shortcuts[j]); int __result = (((const unsigned char *) (const char *) (psz_shortcut))[0] - __s2[0]); if (__s2_len &gt; 0 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (psz_shortcut))[1] - __s2[1]); if (__s2_len &gt; 1 &amp;&amp; __result == 0) { __result = (((const unsigned char *) (const char *) (psz_shortcut))[2] - __s2[2]); if (__s2_len &gt; 2 &amp;&amp; __result == 0) __result = (((const unsigned char *) (const char *) (psz_shortcut))[3] - __s2[3]); } } __result; })))) : __builtin_strcmp (module-&gt;pp_shortcuts[j], psz_shortcut)))); })" data-ref="_M/strcmp">strcmp</a> (<a class="local col3 ref" href="#103module" title='module' data-ref="103module">module</a>-&gt;<a class="ref" href="modules.h.html#module_t::pp_shortcuts" title='module_t::pp_shortcuts' data-ref="module_t::pp_shortcuts">pp_shortcuts</a>[<a class="local col4 ref" href="#104j" title='j' data-ref="104j">j</a>], <a class="local col9 ref" href="#99psz_shortcut" title='psz_shortcut' data-ref="99psz_shortcut">psz_shortcut</a>))</td></tr>
<tr><th id="436">436</th><td>            {</td></tr>
<tr><th id="437">437</th><td>                <a class="ref" href="../../include/vlc_modules.h.html#module_list_free" title='module_list_free' data-ref="module_list_free">module_list_free</a> (<a class="local col1 ref" href="#101list" title='list' data-ref="101list">list</a>);</td></tr>
<tr><th id="438">438</th><td>                <b>return</b> <a class="local col3 ref" href="#103module" title='module' data-ref="103module">module</a>;</td></tr>
<tr><th id="439">439</th><td>            }</td></tr>
<tr><th id="440">440</th><td>    }</td></tr>
<tr><th id="441">441</th><td>    <a class="ref" href="../../include/vlc_modules.h.html#module_list_free" title='module_list_free' data-ref="module_list_free">module_list_free</a> (<a class="local col1 ref" href="#101list" title='list' data-ref="101list">list</a>);</td></tr>
<tr><th id="442">442</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="443">443</th><td>}</td></tr>
<tr><th id="444">444</th><td></td></tr>
<tr><th id="445">445</th><td><i class="doc">/**</i></td></tr>
<tr><th id="446">446</th><td><i class="doc"> * Get the configuration of a module</i></td></tr>
<tr><th id="447">447</th><td><i class="doc"> *</i></td></tr>
<tr><th id="448">448</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">module</span> the module</i></td></tr>
<tr><th id="449">449</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">psize</span> the size of the configuration returned</i></td></tr>
<tr><th id="450">450</th><td><i class="doc"> * <span class="command">\return</span> the configuration as an array</i></td></tr>
<tr><th id="451">451</th><td><i class="doc"> */</i></td></tr>
<tr><th id="452">452</th><td><a class="typedef" href="../../include/vlc_common.h.html#module_config_t" title='module_config_t' data-type='struct module_config_t' data-ref="module_config_t">module_config_t</a> *<dfn class="decl def" id="module_config_get" title='module_config_get' data-ref="module_config_get">module_config_get</dfn>( <em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_t" title='module_t' data-type='struct module_t' data-ref="module_t">module_t</a> *<dfn class="local col5 decl" id="105module" title='module' data-type='const module_t *' data-ref="105module">module</dfn>, <em>unsigned</em> *<a class="macro" href="../../config.h.html#765" title="__restrict" data-ref="_M/restrict"><b>restrict</b></a> <dfn class="local col6 decl" id="106psize" title='psize' data-type='unsigned int *restrict' data-ref="106psize">psize</dfn> )</td></tr>
<tr><th id="453">453</th><td>{</td></tr>
<tr><th id="454">454</th><td>    <em>unsigned</em> <dfn class="local col7 decl" id="107i" title='i' data-type='unsigned int' data-ref="107i">i</dfn>,<dfn class="local col8 decl" id="108j" title='j' data-type='unsigned int' data-ref="108j">j</dfn>;</td></tr>
<tr><th id="455">455</th><td>    <em>unsigned</em> <dfn class="local col9 decl" id="109size" title='size' data-type='unsigned int' data-ref="109size">size</dfn> = <a class="local col5 ref" href="#105module" title='module' data-ref="105module">module</a>-&gt;<a class="ref" href="modules.h.html#module_t::confsize" title='module_t::confsize' data-ref="module_t::confsize">confsize</a>;</td></tr>
<tr><th id="456">456</th><td>    <a class="typedef" href="../../include/vlc_common.h.html#module_config_t" title='module_config_t' data-type='struct module_config_t' data-ref="module_config_t">module_config_t</a> *<dfn class="local col0 decl" id="110config" title='config' data-type='module_config_t *' data-ref="110config">config</dfn> = <a class="ref" href="../../../include/stdlib.h.html#malloc" title='malloc' data-ref="malloc">malloc</a>( <a class="local col9 ref" href="#109size" title='size' data-ref="109size">size</a> * <b>sizeof</b>( *<a class="local col0 ref" href="#110config" title='config' data-ref="110config">config</a> ) );</td></tr>
<tr><th id="457">457</th><td></td></tr>
<tr><th id="458">458</th><td>    <a class="macro" href="../../../include/assert.h.html#88" title="((psize != ((void*)0)) ? (void) (0) : __assert_fail (&quot;psize != ((void*)0)&quot;, &quot;/usr/local/google/home/robertshih/git/vlc/src/modules/modules.c&quot;, 458, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>( <a class="local col6 ref" href="#106psize" title='psize' data-ref="106psize">psize</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> );</td></tr>
<tr><th id="459">459</th><td>    *<a class="local col6 ref" href="#106psize" title='psize' data-ref="106psize">psize</a> = <var>0</var>;</td></tr>
<tr><th id="460">460</th><td></td></tr>
<tr><th id="461">461</th><td>    <b>if</b>( !<a class="local col0 ref" href="#110config" title='config' data-ref="110config">config</a> )</td></tr>
<tr><th id="462">462</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="463">463</th><td></td></tr>
<tr><th id="464">464</th><td>    <b>for</b>( <a class="local col7 ref" href="#107i" title='i' data-ref="107i">i</a> = <var>0</var>, <a class="local col8 ref" href="#108j" title='j' data-ref="108j">j</a> = <var>0</var>; <a class="local col7 ref" href="#107i" title='i' data-ref="107i">i</a> &lt; <a class="local col9 ref" href="#109size" title='size' data-ref="109size">size</a>; <a class="local col7 ref" href="#107i" title='i' data-ref="107i">i</a>++ )</td></tr>
<tr><th id="465">465</th><td>    {</td></tr>
<tr><th id="466">466</th><td>        <em>const</em> <a class="typedef" href="../../include/vlc_common.h.html#module_config_t" title='module_config_t' data-type='struct module_config_t' data-ref="module_config_t">module_config_t</a> *<dfn class="local col1 decl" id="111item" title='item' data-type='const module_config_t *' data-ref="111item">item</dfn> = <a class="local col5 ref" href="#105module" title='module' data-ref="105module">module</a>-&gt;<a class="ref" href="modules.h.html#module_t::p_config" title='module_t::p_config' data-ref="module_t::p_config">p_config</a> + <a class="local col7 ref" href="#107i" title='i' data-ref="107i">i</a>;</td></tr>
<tr><th id="467">467</th><td>        <b>if</b>( <a class="local col1 ref" href="#111item" title='item' data-ref="111item">item</a>-&gt;<a class="ref" href="../../include/vlc_configuration.h.html#module_config_t::b_internal" title='module_config_t::b_internal' data-ref="module_config_t::b_internal">b_internal</a> <i>/* internal option */</i></td></tr>
<tr><th id="468">468</th><td>         || <a class="local col1 ref" href="#111item" title='item' data-ref="111item">item</a>-&gt;<a class="ref" href="../../include/vlc_configuration.h.html#module_config_t::b_removed" title='module_config_t::b_removed' data-ref="module_config_t::b_removed">b_removed</a> <i>/* removed option */</i> )</td></tr>
<tr><th id="469">469</th><td>            <b>continue</b>;</td></tr>
<tr><th id="470">470</th><td></td></tr>
<tr><th id="471">471</th><td>        <a class="ref" href="../../../include/string.h.html#memcpy" title='memcpy' data-ref="memcpy">memcpy</a>( <a class="local col0 ref" href="#110config" title='config' data-ref="110config">config</a> + <a class="local col8 ref" href="#108j" title='j' data-ref="108j">j</a>, <a class="local col1 ref" href="#111item" title='item' data-ref="111item">item</a>, <b>sizeof</b>( *<a class="local col0 ref" href="#110config" title='config' data-ref="110config">config</a> ) );</td></tr>
<tr><th id="472">472</th><td>        <a class="local col8 ref" href="#108j" title='j' data-ref="108j">j</a>++;</td></tr>
<tr><th id="473">473</th><td>    }</td></tr>
<tr><th id="474">474</th><td>    *<a class="local col6 ref" href="#106psize" title='psize' data-ref="106psize">psize</a> = <a class="local col8 ref" href="#108j" title='j' data-ref="108j">j</a>;</td></tr>
<tr><th id="475">475</th><td></td></tr>
<tr><th id="476">476</th><td>    <b>return</b> <a class="local col0 ref" href="#110config" title='config' data-ref="110config">config</a>;</td></tr>
<tr><th id="477">477</th><td>}</td></tr>
<tr><th id="478">478</th><td></td></tr>
<tr><th id="479">479</th><td><i class="doc">/**</i></td></tr>
<tr><th id="480">480</th><td><i class="doc"> * Release the configuration</i></td></tr>
<tr><th id="481">481</th><td><i class="doc"> *</i></td></tr>
<tr><th id="482">482</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">the</span> configuration</i></td></tr>
<tr><th id="483">483</th><td><i class="doc"> * <span class="command">\return</span> nothing</i></td></tr>
<tr><th id="484">484</th><td><i class="doc"> */</i></td></tr>
<tr><th id="485">485</th><td><em>void</em> <dfn class="decl def" id="module_config_free" title='module_config_free' data-ref="module_config_free">module_config_free</dfn>( <a class="typedef" href="../../include/vlc_common.h.html#module_config_t" title='module_config_t' data-type='struct module_config_t' data-ref="module_config_t">module_config_t</a> *<dfn class="local col2 decl" id="112config" title='config' data-type='module_config_t *' data-ref="112config">config</dfn> )</td></tr>
<tr><th id="486">486</th><td>{</td></tr>
<tr><th id="487">487</th><td>    <a class="ref" href="../../../include/stdlib.h.html#free" title='free' data-ref="free">free</a>( <a class="local col2 ref" href="#112config" title='config' data-ref="112config">config</a> );</td></tr>
<tr><th id="488">488</th><td>}</td></tr>
<tr><th id="489">489</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2016-Oct-25</em> from project vlc revision <em>2.2.0-git</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.0.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
