<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>messages.c source code [vlc/src/misc/messages.c] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'vlc/src/misc/messages.c'; var root_path = '../../..'; var data_path = '../../../../data';</script>
<script src='../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>vlc</a>/<a href='..'>src</a>/<a href='./'>misc</a>/<a href='messages.c.html'>messages.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*****************************************************************************</i></td></tr>
<tr><th id="2">2</th><td><i> * messages.c: messages interface</i></td></tr>
<tr><th id="3">3</th><td><i> * This library provides an interface to the message queue to be used by other</i></td></tr>
<tr><th id="4">4</th><td><i> * modules, especially intf modules. See vlc_config.h for output configuration.</i></td></tr>
<tr><th id="5">5</th><td><i> *****************************************************************************</i></td></tr>
<tr><th id="6">6</th><td><i> * Copyright (C) 1998-2005 VLC authors and VideoLAN</i></td></tr>
<tr><th id="7">7</th><td><i> * $Id: 8452a5a99d12badd17d259300a0489f65cdbe94a $</i></td></tr>
<tr><th id="8">8</th><td><i> *</i></td></tr>
<tr><th id="9">9</th><td><i> * Authors: Vincent Seguin &lt;seguin@via.ecp.fr&gt;</i></td></tr>
<tr><th id="10">10</th><td><i> *          Samuel Hocevar &lt;sam@zoy.org&gt;</i></td></tr>
<tr><th id="11">11</th><td><i> *</i></td></tr>
<tr><th id="12">12</th><td><i> * This program is free software; you can redistribute it and/or modify it</i></td></tr>
<tr><th id="13">13</th><td><i> * under the terms of the GNU Lesser General Public License as published by</i></td></tr>
<tr><th id="14">14</th><td><i> * the Free Software Foundation; either version 2.1 of the License, or</i></td></tr>
<tr><th id="15">15</th><td><i> * (at your option) any later version.</i></td></tr>
<tr><th id="16">16</th><td><i> *</i></td></tr>
<tr><th id="17">17</th><td><i> * This program is distributed in the hope that it will be useful,</i></td></tr>
<tr><th id="18">18</th><td><i> * but WITHOUT ANY WARRANTY; without even the implied warranty of</i></td></tr>
<tr><th id="19">19</th><td><i> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</i></td></tr>
<tr><th id="20">20</th><td><i> * GNU Lesser General Public License for more details.</i></td></tr>
<tr><th id="21">21</th><td><i> *</i></td></tr>
<tr><th id="22">22</th><td><i> * You should have received a copy of the GNU Lesser General Public License</i></td></tr>
<tr><th id="23">23</th><td><i> * along with this program; if not, write to the Free Software Foundation,</i></td></tr>
<tr><th id="24">24</th><td><i> * Inc., 51 Franklin Street, Fifth Floor, Boston MA 02110-1301, USA.</i></td></tr>
<tr><th id="25">25</th><td><i> *****************************************************************************/</i></td></tr>
<tr><th id="26">26</th><td></td></tr>
<tr><th id="27">27</th><td><i>/*****************************************************************************</i></td></tr>
<tr><th id="28">28</th><td><i> * Preamble</i></td></tr>
<tr><th id="29">29</th><td><i> *****************************************************************************/</i></td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><u>#<span data-ppcond="31">ifdef</span> <span class="macro" data-ref="_M/HAVE_CONFIG_H">HAVE_CONFIG_H</span></u></td></tr>
<tr><th id="32">32</th><td><u># include <a href="../../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#<span data-ppcond="31">endif</span></u></td></tr>
<tr><th id="34">34</th><td></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../../include/stdlib.h.html">&lt;stdlib.h&gt;</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include &lt;stdarg.h&gt;                                       /* va_list for BSD */</u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../../include/unistd.h.html">&lt;unistd.h&gt;</a></u></td></tr>
<tr><th id="38">38</th><td></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../../include/vlc_common.h.html">&lt;vlc_common.h&gt;</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../../include/vlc_interface.h.html">&lt;vlc_interface.h&gt;</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../../include/vlc_charset.h.html">&lt;vlc_charset.h&gt;</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="../libvlc.h.html">"../libvlc.h"</a></u></td></tr>
<tr><th id="43">43</th><td></td></tr>
<tr><th id="44">44</th><td><i class="doc">/**</i></td></tr>
<tr><th id="45">45</th><td><i class="doc"> * Emit a log message.</i></td></tr>
<tr><th id="46">46</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">obj</span> VLC object emitting the message or NULL</i></td></tr>
<tr><th id="47">47</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">type</span> VLC_MSG_* message type (info, error, warning or debug)</i></td></tr>
<tr><th id="48">48</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">module</span> name of module from which the message come</i></td></tr>
<tr><th id="49">49</th><td><i class="doc"> *               (normally MODULE_STRING)</i></td></tr>
<tr><th id="50">50</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">format</span> printf-like message format</i></td></tr>
<tr><th id="51">51</th><td><i class="doc"> */</i></td></tr>
<tr><th id="52">52</th><td><em>void</em> <dfn class="decl def" id="vlc_Log" title='vlc_Log' data-ref="vlc_Log">vlc_Log</dfn> (<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col1 decl" id="1obj" title='obj' data-type='vlc_object_t *' data-ref="1obj">obj</dfn>, <em>int</em> <dfn class="local col2 decl" id="2type" title='type' data-type='int' data-ref="2type">type</dfn>, <em>const</em> <em>char</em> *<dfn class="local col3 decl" id="3module" title='module' data-type='const char *' data-ref="3module">module</dfn>,</td></tr>
<tr><th id="53">53</th><td>              <em>const</em> <em>char</em> *<dfn class="local col4 decl" id="4format" title='format' data-type='const char *' data-ref="4format">format</dfn>, ... )</td></tr>
<tr><th id="54">54</th><td>{</td></tr>
<tr><th id="55">55</th><td>    <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col5 decl" id="5args" title='args' data-type='va_list' data-ref="5args">args</dfn>;</td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td>    <span class="macro" title="__builtin_va_start(args, format)" data-ref="_M/va_start">va_start</span> (<a class="local col5 ref" href="#5args" title='args' data-ref="5args">args</a>, <a class="local col4 ref" href="#4format" title='format' data-ref="4format">format</a>);</td></tr>
<tr><th id="58">58</th><td>    <a class="ref" href="#vlc_vaLog" title='vlc_vaLog' data-ref="vlc_vaLog">vlc_vaLog</a> (<a class="local col1 ref" href="#1obj" title='obj' data-ref="1obj">obj</a>, <a class="local col2 ref" href="#2type" title='type' data-ref="2type">type</a>, <a class="local col3 ref" href="#3module" title='module' data-ref="3module">module</a>, <a class="local col4 ref" href="#4format" title='format' data-ref="4format">format</a>, <a class="local col5 ref" href="#5args" title='args' data-ref="5args">args</a>);</td></tr>
<tr><th id="59">59</th><td>    <span class="macro" title="__builtin_va_end(args)" data-ref="_M/va_end">va_end</span> (<a class="local col5 ref" href="#5args" title='args' data-ref="5args">args</a>);</td></tr>
<tr><th id="60">60</th><td>}</td></tr>
<tr><th id="61">61</th><td></td></tr>
<tr><th id="62">62</th><td><u>#<span data-ppcond="62">ifdef</span> <span class="macro" data-ref="_M/_WIN32">_WIN32</span></u></td></tr>
<tr><th id="63">63</th><td><em>static</em> <em>void</em> Win32DebugOutputMsg (<em>void</em> *, <em>int</em> , <em>const</em> vlc_log_t *,</td></tr>
<tr><th id="64">64</th><td>                                 <em>const</em> <em>char</em> *, va_list);</td></tr>
<tr><th id="65">65</th><td><u>#<span data-ppcond="62">endif</span></u></td></tr>
<tr><th id="66">66</th><td></td></tr>
<tr><th id="67">67</th><td><i class="doc">/**</i></td></tr>
<tr><th id="68">68</th><td><i class="doc"> * Emit a log message. This function is the variable argument list equivalent</i></td></tr>
<tr><th id="69">69</th><td><i class="doc"> * to vlc_Log().</i></td></tr>
<tr><th id="70">70</th><td><i class="doc"> */</i></td></tr>
<tr><th id="71">71</th><td><em>void</em> <dfn class="decl def" id="vlc_vaLog" title='vlc_vaLog' data-ref="vlc_vaLog">vlc_vaLog</dfn> (<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col6 decl" id="6obj" title='obj' data-type='vlc_object_t *' data-ref="6obj">obj</dfn>, <em>int</em> <dfn class="local col7 decl" id="7type" title='type' data-type='int' data-ref="7type">type</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="8module" title='module' data-type='const char *' data-ref="8module">module</dfn>,</td></tr>
<tr><th id="72">72</th><td>                <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="9format" title='format' data-type='const char *' data-ref="9format">format</dfn>, <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col0 decl" id="10args" title='args' data-type='__va_list_tag *' data-ref="10args">args</dfn>)</td></tr>
<tr><th id="73">73</th><td>{</td></tr>
<tr><th id="74">74</th><td>    <b>if</b> (<a class="local col6 ref" href="#6obj" title='obj' data-ref="6obj">obj</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col6 ref" href="#6obj" title='obj' data-ref="6obj">obj</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::i_flags' data-ref="vlc_object_t::i_flags">i_flags</a> &amp; <a class="macro" href="../../include/vlc_objects.h.html#35" title="0x0002" data-ref="_M/OBJECT_FLAGS_QUIET">OBJECT_FLAGS_QUIET</a>)</td></tr>
<tr><th id="75">75</th><td>        <b>return</b>;</td></tr>
<tr><th id="76">76</th><td></td></tr>
<tr><th id="77">77</th><td>    <i>/* Get basename from the module filename */</i></td></tr>
<tr><th id="78">78</th><td>    <em>char</em> *<dfn class="local col1 decl" id="11p" title='p' data-type='char *' data-ref="11p">p</dfn> = <a class="ref" href="../../../include/string.h.html#strrchr" title='strrchr' data-ref="strrchr">strrchr</a>(<a class="local col8 ref" href="#8module" title='module' data-ref="8module">module</a>, <kbd>'/'</kbd>);</td></tr>
<tr><th id="79">79</th><td>    <b>if</b> (<a class="local col1 ref" href="#11p" title='p' data-ref="11p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="80">80</th><td>        <a class="local col8 ref" href="#8module" title='module' data-ref="8module">module</a> = <a class="local col1 ref" href="#11p" title='p' data-ref="11p">p</a>;</td></tr>
<tr><th id="81">81</th><td>    <a class="local col1 ref" href="#11p" title='p' data-ref="11p">p</a> = <a class="macro" href="../../../include/x86_64-linux-gnu/bits/string2.h.html#395" title="(__extension__ (__builtin_constant_p (&apos;.&apos;) &amp;&amp; !__builtin_constant_p (module) &amp;&amp; (&apos;.&apos;) == &apos;\0&apos; ? (char *) __rawmemchr (module, &apos;.&apos;) : __builtin_strchr (module, &apos;.&apos;)))" data-ref="_M/strchr">strchr</a>(<a class="local col8 ref" href="#8module" title='module' data-ref="8module">module</a>, <kbd>'.'</kbd>);</td></tr>
<tr><th id="82">82</th><td></td></tr>
<tr><th id="83">83</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col2 decl" id="12modlen" title='modlen' data-type='size_t' data-ref="12modlen">modlen</dfn> = (<a class="local col1 ref" href="#11p" title='p' data-ref="11p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) ? (<a class="local col1 ref" href="#11p" title='p' data-ref="11p">p</a> - <a class="local col8 ref" href="#8module" title='module' data-ref="8module">module</a>) : <var>1</var>;</td></tr>
<tr><th id="84">84</th><td>    <em>char</em> <dfn class="local col3 decl" id="13modulebuf" title='modulebuf' data-type='char [modlen + 1]' data-ref="13modulebuf">modulebuf</dfn>[<a class="local col2 ref" href="#12modlen" title='modlen' data-ref="12modlen">modlen</a> + <var>1</var>];</td></tr>
<tr><th id="85">85</th><td>    <b>if</b> (<a class="local col1 ref" href="#11p" title='p' data-ref="11p">p</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="86">86</th><td>    {</td></tr>
<tr><th id="87">87</th><td>        <a class="ref" href="../../../include/string.h.html#memcpy" title='memcpy' data-ref="memcpy">memcpy</a>(<a class="local col3 ref" href="#13modulebuf" title='modulebuf' data-ref="13modulebuf">modulebuf</a>, <a class="local col8 ref" href="#8module" title='module' data-ref="8module">module</a>, <a class="local col2 ref" href="#12modlen" title='modlen' data-ref="12modlen">modlen</a>);</td></tr>
<tr><th id="88">88</th><td>        <a class="local col3 ref" href="#13modulebuf" title='modulebuf' data-ref="13modulebuf">modulebuf</a>[<a class="local col2 ref" href="#12modlen" title='modlen' data-ref="12modlen">modlen</a>] = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="89">89</th><td>        <a class="local col8 ref" href="#8module" title='module' data-ref="8module">module</a> = <a class="local col3 ref" href="#13modulebuf" title='modulebuf' data-ref="13modulebuf">modulebuf</a>;</td></tr>
<tr><th id="90">90</th><td>    }</td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td>    <i>/* Fill message information fields */</i></td></tr>
<tr><th id="93">93</th><td>    <a class="typedef" href="../../include/vlc_messages.h.html#vlc_log_t" title='vlc_log_t' data-type='struct vlc_log_t' data-ref="vlc_log_t">vlc_log_t</a> <dfn class="local col4 decl" id="14msg" title='msg' data-type='vlc_log_t' data-ref="14msg">msg</dfn>;</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td>    <a class="local col4 ref" href="#14msg" title='msg' data-ref="14msg">msg</a>.<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::i_object_id" title='vlc_log_t::i_object_id' data-ref="vlc_log_t::i_object_id">i_object_id</a> = (<a class="typedef" href="../../../include/stdint.h.html#uintptr_t" title='uintptr_t' data-type='unsigned long' data-ref="uintptr_t">uintptr_t</a>)<a class="local col6 ref" href="#6obj" title='obj' data-ref="6obj">obj</a>;</td></tr>
<tr><th id="96">96</th><td>    <a class="local col4 ref" href="#14msg" title='msg' data-ref="14msg">msg</a>.<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_object_type" title='vlc_log_t::psz_object_type' data-ref="vlc_log_t::psz_object_type">psz_object_type</a> = (<a class="local col6 ref" href="#6obj" title='obj' data-ref="6obj">obj</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) ? <a class="local col6 ref" href="#6obj" title='obj' data-ref="6obj">obj</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::psz_object_type' data-ref="vlc_object_t::psz_object_type">psz_object_type</a> : <q>"generic"</q>;</td></tr>
<tr><th id="97">97</th><td>    <a class="local col4 ref" href="#14msg" title='msg' data-ref="14msg">msg</a>.<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_module" title='vlc_log_t::psz_module' data-ref="vlc_log_t::psz_module">psz_module</a> = <a class="local col8 ref" href="#8module" title='module' data-ref="8module">module</a>;</td></tr>
<tr><th id="98">98</th><td>    <a class="local col4 ref" href="#14msg" title='msg' data-ref="14msg">msg</a>.<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_header" title='vlc_log_t::psz_header' data-ref="vlc_log_t::psz_header">psz_header</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="99">99</th><td></td></tr>
<tr><th id="100">100</th><td>    <b>for</b> (<a class="typedef" href="../../include/vlc_common.h.html#vlc_object_t" title='vlc_object_t' data-type='struct vlc_object_t' data-ref="vlc_object_t">vlc_object_t</a> *<dfn class="local col5 decl" id="15o" title='o' data-type='vlc_object_t *' data-ref="15o">o</dfn> = <a class="local col6 ref" href="#6obj" title='obj' data-ref="6obj">obj</a>; <a class="local col5 ref" href="#15o" title='o' data-ref="15o">o</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>; <a class="local col5 ref" href="#15o" title='o' data-ref="15o">o</a> = <a class="local col5 ref" href="#15o" title='o' data-ref="15o">o</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::p_parent' data-ref="vlc_object_t::p_parent">p_parent</a>)</td></tr>
<tr><th id="101">101</th><td>        <b>if</b> (<a class="local col5 ref" href="#15o" title='o' data-ref="15o">o</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::psz_header' data-ref="vlc_object_t::psz_header">psz_header</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="102">102</th><td>        {</td></tr>
<tr><th id="103">103</th><td>            <a class="local col4 ref" href="#14msg" title='msg' data-ref="14msg">msg</a>.<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_header" title='vlc_log_t::psz_header' data-ref="vlc_log_t::psz_header">psz_header</a> = <a class="local col5 ref" href="#15o" title='o' data-ref="15o">o</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::psz_header' data-ref="vlc_object_t::psz_header">psz_header</a>;</td></tr>
<tr><th id="104">104</th><td>            <b>break</b>;</td></tr>
<tr><th id="105">105</th><td>        }</td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td>    <i>/* Pass message to the callback */</i></td></tr>
<tr><th id="108">108</th><td>    <a class="typedef" href="../libvlc.h.html#libvlc_priv_t" title='libvlc_priv_t' data-type='struct libvlc_priv_t' data-ref="libvlc_priv_t">libvlc_priv_t</a> *<dfn class="local col6 decl" id="16priv" title='priv' data-type='libvlc_priv_t *' data-ref="16priv">priv</dfn> = <a class="local col6 ref" href="#6obj" title='obj' data-ref="6obj">obj</a> ? <a class="ref" href="../libvlc.h.html#libvlc_priv" title='libvlc_priv' data-ref="libvlc_priv">libvlc_priv</a> (<a class="local col6 ref" href="#6obj" title='obj' data-ref="6obj">obj</a>-&gt;<a class="ref" href="../../include/vlc_objects.h.html#44" title='vlc_object_t::p_libvlc' data-ref="vlc_object_t::p_libvlc">p_libvlc</a>) : <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="109">109</th><td></td></tr>
<tr><th id="110">110</th><td><u>#<span data-ppcond="110">ifdef</span> <span class="macro" data-ref="_M/_WIN32">_WIN32</span></u></td></tr>
<tr><th id="111">111</th><td>    va_list ap;</td></tr>
<tr><th id="112">112</th><td></td></tr>
<tr><th id="113">113</th><td>    va_copy (ap, args);</td></tr>
<tr><th id="114">114</th><td>    Win32DebugOutputMsg (priv ? &amp;priv-&gt;log.verbose : NULL, type, &amp;msg, format, ap);</td></tr>
<tr><th id="115">115</th><td>    va_end (ap);</td></tr>
<tr><th id="116">116</th><td><u>#<span data-ppcond="110">endif</span></u></td></tr>
<tr><th id="117">117</th><td></td></tr>
<tr><th id="118">118</th><td>    <b>if</b> (<a class="local col6 ref" href="#16priv" title='priv' data-ref="16priv">priv</a>) {</td></tr>
<tr><th id="119">119</th><td>        <a class="ref" href="../../include/vlc_threads.h.html#vlc_rwlock_rdlock" title='vlc_rwlock_rdlock' data-ref="vlc_rwlock_rdlock">vlc_rwlock_rdlock</a> (&amp;<a class="local col6 ref" href="#16priv" title='priv' data-ref="16priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::lock" title='libvlc_priv_t::&lt;anonymous struct&gt;::lock' data-ref="libvlc_priv_t::{anonymous}::lock">lock</a>);</td></tr>
<tr><th id="120">120</th><td>        <a class="local col6 ref" href="#16priv" title='priv' data-ref="16priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::cb" title='libvlc_priv_t::&lt;anonymous struct&gt;::cb' data-ref="libvlc_priv_t::{anonymous}::cb">cb</a> (<a class="local col6 ref" href="#16priv" title='priv' data-ref="16priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::opaque" title='libvlc_priv_t::&lt;anonymous struct&gt;::opaque' data-ref="libvlc_priv_t::{anonymous}::opaque">opaque</a>, <a class="local col7 ref" href="#7type" title='type' data-ref="7type">type</a>, &amp;<a class="local col4 ref" href="#14msg" title='msg' data-ref="14msg">msg</a>, <a class="local col9 ref" href="#9format" title='format' data-ref="9format">format</a>, <a class="local col0 ref" href="#10args" title='args' data-ref="10args">args</a>);</td></tr>
<tr><th id="121">121</th><td>        <a class="ref" href="../../include/vlc_threads.h.html#vlc_rwlock_unlock" title='vlc_rwlock_unlock' data-ref="vlc_rwlock_unlock">vlc_rwlock_unlock</a> (&amp;<a class="local col6 ref" href="#16priv" title='priv' data-ref="16priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::lock" title='libvlc_priv_t::&lt;anonymous struct&gt;::lock' data-ref="libvlc_priv_t::{anonymous}::lock">lock</a>);</td></tr>
<tr><th id="122">122</th><td>    }</td></tr>
<tr><th id="123">123</th><td>}</td></tr>
<tr><th id="124">124</th><td></td></tr>
<tr><th id="125">125</th><td><em>static</em> <em>const</em> <em>char</em> <dfn class="tu decl def" id="msg_type" title='msg_type' data-type='const char [4][9]' data-ref="msg_type">msg_type</dfn>[<var>4</var>][<var>9</var>] = { <q>""</q>, <q>" error"</q>, <q>" warning"</q>, <q>" debug"</q> };</td></tr>
<tr><th id="126">126</th><td><u>#define <dfn class="macro" id="_M/COL" data-ref="_M/COL">COL</dfn>(x,y)  "\033[" #x ";" #y "m"</u></td></tr>
<tr><th id="127">127</th><td><u>#define <dfn class="macro" id="_M/RED" data-ref="_M/RED">RED</dfn>     COL(31,1)</u></td></tr>
<tr><th id="128">128</th><td><u>#define <dfn class="macro" id="_M/GREEN" data-ref="_M/GREEN">GREEN</dfn>   COL(32,1)</u></td></tr>
<tr><th id="129">129</th><td><u>#define <dfn class="macro" id="_M/YELLOW" data-ref="_M/YELLOW">YELLOW</dfn>  COL(0,33)</u></td></tr>
<tr><th id="130">130</th><td><u>#define <dfn class="macro" id="_M/WHITE" data-ref="_M/WHITE">WHITE</dfn>   COL(0,1)</u></td></tr>
<tr><th id="131">131</th><td><u>#define <dfn class="macro" id="_M/GRAY" data-ref="_M/GRAY">GRAY</dfn>    "\033[0m"</u></td></tr>
<tr><th id="132">132</th><td><em>static</em> <em>const</em> <em>char</em> <dfn class="tu decl def" id="msg_color" title='msg_color' data-type='const char [4][8]' data-ref="msg_color">msg_color</dfn>[<var>4</var>][<var>8</var>] = { <a class="macro" href="#130" title="&quot;\033[&quot; &quot;0&quot; &quot;;&quot; &quot;1&quot; &quot;m&quot;" data-ref="_M/WHITE">WHITE</a>, <a class="macro" href="#127" title="&quot;\033[&quot; &quot;31&quot; &quot;;&quot; &quot;1&quot; &quot;m&quot;" data-ref="_M/RED">RED</a>, <a class="macro" href="#129" title="&quot;\033[&quot; &quot;0&quot; &quot;;&quot; &quot;33&quot; &quot;m&quot;" data-ref="_M/YELLOW">YELLOW</a>, <a class="macro" href="#131" title="&quot;\033[0m&quot;" data-ref="_M/GRAY">GRAY</a> };</td></tr>
<tr><th id="133">133</th><td></td></tr>
<tr><th id="134">134</th><td><i  data-doc="ptr_width">/* Display size of a pointer */</i></td></tr>
<tr><th id="135">135</th><td><em>static</em> <em>const</em> <em>int</em> <dfn class="tu decl def" id="ptr_width" title='ptr_width' data-type='const int' data-ref="ptr_width">ptr_width</dfn> = <var>2</var> * <i  data-doc="ptr_width">/* hex digits */</i> <b>sizeof</b>(<a class="typedef" href="../../../include/stdint.h.html#uintptr_t" title='uintptr_t' data-type='unsigned long' data-ref="uintptr_t">uintptr_t</a>);</td></tr>
<tr><th id="136">136</th><td></td></tr>
<tr><th id="137">137</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="PrintColorMsg" title='PrintColorMsg' data-type='void PrintColorMsg(void * d, int type, const vlc_log_t * p_item, const char * format, __va_list_tag * ap)' data-ref="PrintColorMsg">PrintColorMsg</dfn> (<em>void</em> *<dfn class="local col7 decl" id="17d" title='d' data-type='void *' data-ref="17d">d</dfn>, <em>int</em> <dfn class="local col8 decl" id="18type" title='type' data-type='int' data-ref="18type">type</dfn>, <em>const</em> <a class="typedef" href="../../include/vlc_messages.h.html#vlc_log_t" title='vlc_log_t' data-type='struct vlc_log_t' data-ref="vlc_log_t">vlc_log_t</a> *<dfn class="local col9 decl" id="19p_item" title='p_item' data-type='const vlc_log_t *' data-ref="19p_item">p_item</dfn>,</td></tr>
<tr><th id="138">138</th><td>                           <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="20format" title='format' data-type='const char *' data-ref="20format">format</dfn>, <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col1 decl" id="21ap" title='ap' data-type='__va_list_tag *' data-ref="21ap">ap</dfn>)</td></tr>
<tr><th id="139">139</th><td>{</td></tr>
<tr><th id="140">140</th><td>    <a class="typedef" href="../../../include/stdio.h.html#FILE" title='FILE' data-type='struct _IO_FILE' data-ref="FILE">FILE</a> *<dfn class="local col2 decl" id="22stream" title='stream' data-type='FILE *' data-ref="22stream">stream</dfn> = <a class="macro" href="../../../include/stdio.h.html#174" title="stderr" data-ref="_M/stderr">stderr</a>;</td></tr>
<tr><th id="141">141</th><td>    <em>int</em> <dfn class="local col3 decl" id="23verbose" title='verbose' data-type='int' data-ref="23verbose">verbose</dfn> = (<a class="typedef" href="../../../include/unistd.h.html#intptr_t" title='intptr_t' data-type='__intptr_t' data-ref="intptr_t">intptr_t</a>)<a class="local col7 ref" href="#17d" title='d' data-ref="17d">d</a>;</td></tr>
<tr><th id="142">142</th><td></td></tr>
<tr><th id="143">143</th><td>    <b>if</b> (<a class="local col3 ref" href="#23verbose" title='verbose' data-ref="23verbose">verbose</a> &lt; <var>0</var> || <a class="local col3 ref" href="#23verbose" title='verbose' data-ref="23verbose">verbose</a> &lt; (<a class="local col8 ref" href="#18type" title='type' data-ref="18type">type</a> - <a class="enum" href="../../include/vlc_messages.h.html#vlc_log_type::VLC_MSG_ERR" title='vlc_log_type::VLC_MSG_ERR' data-ref="vlc_log_type::VLC_MSG_ERR">VLC_MSG_ERR</a>))</td></tr>
<tr><th id="144">144</th><td>        <b>return</b>;</td></tr>
<tr><th id="145">145</th><td></td></tr>
<tr><th id="146">146</th><td>    <em>int</em> <dfn class="local col4 decl" id="24canc" title='canc' data-type='int' data-ref="24canc">canc</dfn> = <a class="ref" href="../../include/vlc_threads.h.html#vlc_savecancel" title='vlc_savecancel' data-ref="vlc_savecancel">vlc_savecancel</a> ();</td></tr>
<tr><th id="147">147</th><td></td></tr>
<tr><th id="148">148</th><td>    <a class="ref" href="../../../include/stdio.h.html#flockfile" title='flockfile' data-ref="flockfile">flockfile</a> (<a class="local col2 ref" href="#22stream" title='stream' data-ref="22stream">stream</a>);</td></tr>
<tr><th id="149">149</th><td>    <a class="ref" href="../../include/vlc_charset.h.html#utf8_fprintf" title='utf8_fprintf' data-ref="utf8_fprintf">utf8_fprintf</a> (<a class="local col2 ref" href="#22stream" title='stream' data-ref="22stream">stream</a>, <q>"["</q><a class="macro" href="#128" title="&quot;\033[&quot; &quot;32&quot; &quot;;&quot; &quot;1&quot; &quot;m&quot;" data-ref="_M/GREEN">GREEN</a><q>"%0*"</q><a class="macro" href="../../../include/inttypes.h.html#164" title="&quot;l&quot; &quot;x&quot;" data-ref="_M/PRIxPTR">PRIxPTR</a><q>""</q><a class="macro" href="#131" title="&quot;\033[0m&quot;" data-ref="_M/GRAY">GRAY</a><q>"] "</q>, <a class="tu ref" href="#ptr_width" title='ptr_width' data-use='r' data-ref="ptr_width">ptr_width</a>, <a class="local col9 ref" href="#19p_item" title='p_item' data-ref="19p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::i_object_id" title='vlc_log_t::i_object_id' data-ref="vlc_log_t::i_object_id">i_object_id</a>);</td></tr>
<tr><th id="150">150</th><td>    <b>if</b> (<a class="local col9 ref" href="#19p_item" title='p_item' data-ref="19p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_header" title='vlc_log_t::psz_header' data-ref="vlc_log_t::psz_header">psz_header</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="151">151</th><td>        <a class="ref" href="../../include/vlc_charset.h.html#utf8_fprintf" title='utf8_fprintf' data-ref="utf8_fprintf">utf8_fprintf</a> (<a class="local col2 ref" href="#22stream" title='stream' data-ref="22stream">stream</a>, <q>"[%s] "</q>, <a class="local col9 ref" href="#19p_item" title='p_item' data-ref="19p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_header" title='vlc_log_t::psz_header' data-ref="vlc_log_t::psz_header">psz_header</a>);</td></tr>
<tr><th id="152">152</th><td>    <a class="ref" href="../../include/vlc_charset.h.html#utf8_fprintf" title='utf8_fprintf' data-ref="utf8_fprintf">utf8_fprintf</a> (<a class="local col2 ref" href="#22stream" title='stream' data-ref="22stream">stream</a>, <q>"%s %s%s: %s"</q>, <a class="local col9 ref" href="#19p_item" title='p_item' data-ref="19p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_module" title='vlc_log_t::psz_module' data-ref="vlc_log_t::psz_module">psz_module</a>,</td></tr>
<tr><th id="153">153</th><td>                  <a class="local col9 ref" href="#19p_item" title='p_item' data-ref="19p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_object_type" title='vlc_log_t::psz_object_type' data-ref="vlc_log_t::psz_object_type">psz_object_type</a>, <a class="tu ref" href="#msg_type" title='msg_type' data-ref="msg_type">msg_type</a>[<a class="local col8 ref" href="#18type" title='type' data-ref="18type">type</a>], <a class="tu ref" href="#msg_color" title='msg_color' data-ref="msg_color">msg_color</a>[<a class="local col8 ref" href="#18type" title='type' data-ref="18type">type</a>]);</td></tr>
<tr><th id="154">154</th><td>    <a class="ref" href="../../include/vlc_charset.h.html#utf8_vfprintf" title='utf8_vfprintf' data-ref="utf8_vfprintf">utf8_vfprintf</a> (<a class="local col2 ref" href="#22stream" title='stream' data-ref="22stream">stream</a>, <a class="local col0 ref" href="#20format" title='format' data-ref="20format">format</a>, <a class="local col1 ref" href="#21ap" title='ap' data-ref="21ap">ap</a>);</td></tr>
<tr><th id="155">155</th><td>    <a class="ref" href="../../../include/stdio.h.html#fputs" title='fputs' data-ref="fputs">fputs</a> (<a class="macro" href="#131" title="&quot;\033[0m&quot;" data-ref="_M/GRAY">GRAY</a><q>"\n"</q>, <a class="local col2 ref" href="#22stream" title='stream' data-ref="22stream">stream</a>);</td></tr>
<tr><th id="156">156</th><td><u>#<span data-ppcond="156">if</span> defined (<span class="macro" data-ref="_M/_WIN32">_WIN32</span>) || defined (<span class="macro" data-ref="_M/__OS2__">__OS2__</span>)</u></td></tr>
<tr><th id="157">157</th><td>    fflush (stream);</td></tr>
<tr><th id="158">158</th><td><u>#<span data-ppcond="156">endif</span></u></td></tr>
<tr><th id="159">159</th><td>    <a class="ref" href="../../../include/stdio.h.html#funlockfile" title='funlockfile' data-ref="funlockfile">funlockfile</a> (<a class="local col2 ref" href="#22stream" title='stream' data-ref="22stream">stream</a>);</td></tr>
<tr><th id="160">160</th><td>    <a class="ref" href="../../include/vlc_threads.h.html#vlc_restorecancel" title='vlc_restorecancel' data-ref="vlc_restorecancel">vlc_restorecancel</a> (<a class="local col4 ref" href="#24canc" title='canc' data-ref="24canc">canc</a>);</td></tr>
<tr><th id="161">161</th><td>}</td></tr>
<tr><th id="162">162</th><td></td></tr>
<tr><th id="163">163</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="PrintMsg" title='PrintMsg' data-type='void PrintMsg(void * d, int type, const vlc_log_t * p_item, const char * format, __va_list_tag * ap)' data-ref="PrintMsg">PrintMsg</dfn> (<em>void</em> *<dfn class="local col5 decl" id="25d" title='d' data-type='void *' data-ref="25d">d</dfn>, <em>int</em> <dfn class="local col6 decl" id="26type" title='type' data-type='int' data-ref="26type">type</dfn>, <em>const</em> <a class="typedef" href="../../include/vlc_messages.h.html#vlc_log_t" title='vlc_log_t' data-type='struct vlc_log_t' data-ref="vlc_log_t">vlc_log_t</a> *<dfn class="local col7 decl" id="27p_item" title='p_item' data-type='const vlc_log_t *' data-ref="27p_item">p_item</dfn>,</td></tr>
<tr><th id="164">164</th><td>                      <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="28format" title='format' data-type='const char *' data-ref="28format">format</dfn>, <span class='typedef' title='va_list' data-type='__gnuc_va_list' data-ref="va_list">va_list</span> <dfn class="local col9 decl" id="29ap" title='ap' data-type='__va_list_tag *' data-ref="29ap">ap</dfn>)</td></tr>
<tr><th id="165">165</th><td>{</td></tr>
<tr><th id="166">166</th><td>    <a class="typedef" href="../../../include/stdio.h.html#FILE" title='FILE' data-type='struct _IO_FILE' data-ref="FILE">FILE</a> *<dfn class="local col0 decl" id="30stream" title='stream' data-type='FILE *' data-ref="30stream">stream</dfn> = <a class="macro" href="../../../include/stdio.h.html#174" title="stderr" data-ref="_M/stderr">stderr</a>;</td></tr>
<tr><th id="167">167</th><td>    <em>int</em> <dfn class="local col1 decl" id="31verbose" title='verbose' data-type='int' data-ref="31verbose">verbose</dfn> = (<a class="typedef" href="../../../include/unistd.h.html#intptr_t" title='intptr_t' data-type='__intptr_t' data-ref="intptr_t">intptr_t</a>)<a class="local col5 ref" href="#25d" title='d' data-ref="25d">d</a>;</td></tr>
<tr><th id="168">168</th><td></td></tr>
<tr><th id="169">169</th><td>    <b>if</b> (<a class="local col1 ref" href="#31verbose" title='verbose' data-ref="31verbose">verbose</a> &lt; <var>0</var> || <a class="local col1 ref" href="#31verbose" title='verbose' data-ref="31verbose">verbose</a> &lt; (<a class="local col6 ref" href="#26type" title='type' data-ref="26type">type</a> - <a class="enum" href="../../include/vlc_messages.h.html#vlc_log_type::VLC_MSG_ERR" title='vlc_log_type::VLC_MSG_ERR' data-ref="vlc_log_type::VLC_MSG_ERR">VLC_MSG_ERR</a>))</td></tr>
<tr><th id="170">170</th><td>        <b>return</b>;</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td>    <em>int</em> <dfn class="local col2 decl" id="32canc" title='canc' data-type='int' data-ref="32canc">canc</dfn> = <a class="ref" href="../../include/vlc_threads.h.html#vlc_savecancel" title='vlc_savecancel' data-ref="vlc_savecancel">vlc_savecancel</a> ();</td></tr>
<tr><th id="173">173</th><td></td></tr>
<tr><th id="174">174</th><td>    <a class="ref" href="../../../include/stdio.h.html#flockfile" title='flockfile' data-ref="flockfile">flockfile</a> (<a class="local col0 ref" href="#30stream" title='stream' data-ref="30stream">stream</a>);</td></tr>
<tr><th id="175">175</th><td>    <a class="ref" href="../../include/vlc_charset.h.html#utf8_fprintf" title='utf8_fprintf' data-ref="utf8_fprintf">utf8_fprintf</a> (<a class="local col0 ref" href="#30stream" title='stream' data-ref="30stream">stream</a>, <q>"[%0*"</q><a class="macro" href="../../../include/inttypes.h.html#164" title="&quot;l&quot; &quot;x&quot;" data-ref="_M/PRIxPTR">PRIxPTR</a><q>"] "</q>, <a class="tu ref" href="#ptr_width" title='ptr_width' data-use='r' data-ref="ptr_width">ptr_width</a>, <a class="local col7 ref" href="#27p_item" title='p_item' data-ref="27p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::i_object_id" title='vlc_log_t::i_object_id' data-ref="vlc_log_t::i_object_id">i_object_id</a>);</td></tr>
<tr><th id="176">176</th><td>    <b>if</b> (<a class="local col7 ref" href="#27p_item" title='p_item' data-ref="27p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_header" title='vlc_log_t::psz_header' data-ref="vlc_log_t::psz_header">psz_header</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="177">177</th><td>        <a class="ref" href="../../include/vlc_charset.h.html#utf8_fprintf" title='utf8_fprintf' data-ref="utf8_fprintf">utf8_fprintf</a> (<a class="local col0 ref" href="#30stream" title='stream' data-ref="30stream">stream</a>, <q>"[%s] "</q>, <a class="local col7 ref" href="#27p_item" title='p_item' data-ref="27p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_header" title='vlc_log_t::psz_header' data-ref="vlc_log_t::psz_header">psz_header</a>);</td></tr>
<tr><th id="178">178</th><td>    <a class="ref" href="../../include/vlc_charset.h.html#utf8_fprintf" title='utf8_fprintf' data-ref="utf8_fprintf">utf8_fprintf</a> (<a class="local col0 ref" href="#30stream" title='stream' data-ref="30stream">stream</a>, <q>"%s %s%s: "</q>, <a class="local col7 ref" href="#27p_item" title='p_item' data-ref="27p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_module" title='vlc_log_t::psz_module' data-ref="vlc_log_t::psz_module">psz_module</a>,</td></tr>
<tr><th id="179">179</th><td>                  <a class="local col7 ref" href="#27p_item" title='p_item' data-ref="27p_item">p_item</a>-&gt;<a class="ref" href="../../include/vlc_messages.h.html#vlc_log_t::psz_object_type" title='vlc_log_t::psz_object_type' data-ref="vlc_log_t::psz_object_type">psz_object_type</a>, <a class="tu ref" href="#msg_type" title='msg_type' data-ref="msg_type">msg_type</a>[<a class="local col6 ref" href="#26type" title='type' data-ref="26type">type</a>]);</td></tr>
<tr><th id="180">180</th><td>    <a class="ref" href="../../include/vlc_charset.h.html#utf8_vfprintf" title='utf8_vfprintf' data-ref="utf8_vfprintf">utf8_vfprintf</a> (<a class="local col0 ref" href="#30stream" title='stream' data-ref="30stream">stream</a>, <a class="local col8 ref" href="#28format" title='format' data-ref="28format">format</a>, <a class="local col9 ref" href="#29ap" title='ap' data-ref="29ap">ap</a>);</td></tr>
<tr><th id="181">181</th><td>    <a class="ref" href="../../../include/stdio.h.html#putc_unlocked" title='putc_unlocked' data-ref="putc_unlocked">putc_unlocked</a> (<kbd>'\n'</kbd>, <a class="local col0 ref" href="#30stream" title='stream' data-ref="30stream">stream</a>);</td></tr>
<tr><th id="182">182</th><td><u>#<span data-ppcond="182">if</span> defined (<span class="macro" data-ref="_M/_WIN32">_WIN32</span>) || defined (<span class="macro" data-ref="_M/__OS2__">__OS2__</span>)</u></td></tr>
<tr><th id="183">183</th><td>    fflush (stream);</td></tr>
<tr><th id="184">184</th><td><u>#<span data-ppcond="182">endif</span></u></td></tr>
<tr><th id="185">185</th><td>    <a class="ref" href="../../../include/stdio.h.html#funlockfile" title='funlockfile' data-ref="funlockfile">funlockfile</a> (<a class="local col0 ref" href="#30stream" title='stream' data-ref="30stream">stream</a>);</td></tr>
<tr><th id="186">186</th><td>    <a class="ref" href="../../include/vlc_threads.h.html#vlc_restorecancel" title='vlc_restorecancel' data-ref="vlc_restorecancel">vlc_restorecancel</a> (<a class="local col2 ref" href="#32canc" title='canc' data-ref="32canc">canc</a>);</td></tr>
<tr><th id="187">187</th><td>}</td></tr>
<tr><th id="188">188</th><td></td></tr>
<tr><th id="189">189</th><td><u>#<span data-ppcond="189">ifdef</span> <span class="macro" data-ref="_M/_WIN32">_WIN32</span></u></td></tr>
<tr><th id="190">190</th><td><em>static</em> <em>void</em> Win32DebugOutputMsg (<em>void</em>* d, <em>int</em> type, <em>const</em> vlc_log_t *p_item,</td></tr>
<tr><th id="191">191</th><td>                                 <em>const</em> <em>char</em> *format, va_list dol)</td></tr>
<tr><th id="192">192</th><td>{</td></tr>
<tr><th id="193">193</th><td>    VLC_UNUSED(p_item);</td></tr>
<tr><th id="194">194</th><td></td></tr>
<tr><th id="195">195</th><td>    <em>const</em> <em>signed</em> <em>char</em> *pverbose = d;</td></tr>
<tr><th id="196">196</th><td>    <b>if</b> (pverbose &amp;&amp; (*pverbose &lt; <var>0</var> || *pverbose &lt; (type - VLC_MSG_ERR)))</td></tr>
<tr><th id="197">197</th><td>        <b>return</b>;</td></tr>
<tr><th id="198">198</th><td></td></tr>
<tr><th id="199">199</th><td>    va_list dol2;</td></tr>
<tr><th id="200">200</th><td>    va_copy (dol2, dol);</td></tr>
<tr><th id="201">201</th><td>    <em>int</em> msg_len = vsnprintf(NULL, <var>0</var>, format, dol2);</td></tr>
<tr><th id="202">202</th><td>    va_end (dol2);</td></tr>
<tr><th id="203">203</th><td></td></tr>
<tr><th id="204">204</th><td>    <b>if</b>(msg_len &lt;= <var>0</var>)</td></tr>
<tr><th id="205">205</th><td>        <b>return</b>;</td></tr>
<tr><th id="206">206</th><td></td></tr>
<tr><th id="207">207</th><td>    <em>char</em> *msg = malloc(msg_len + <var>1</var> + <var>1</var>);</td></tr>
<tr><th id="208">208</th><td>    <b>if</b> (!msg)</td></tr>
<tr><th id="209">209</th><td>        <b>return</b>;</td></tr>
<tr><th id="210">210</th><td></td></tr>
<tr><th id="211">211</th><td>    msg_len = vsnprintf(msg, msg_len+<var>1</var>, format, dol);</td></tr>
<tr><th id="212">212</th><td>    <b>if</b> (msg_len &gt; <var>0</var>){</td></tr>
<tr><th id="213">213</th><td>        <b>if</b>(msg[msg_len-<var>1</var>] != <kbd>'\n'</kbd>){</td></tr>
<tr><th id="214">214</th><td>            msg[msg_len] = <kbd>'\n'</kbd>;</td></tr>
<tr><th id="215">215</th><td>            msg[msg_len + <var>1</var>] = <kbd>'\0'</kbd>;</td></tr>
<tr><th id="216">216</th><td>        }</td></tr>
<tr><th id="217">217</th><td>        <em>char</em>* psz_msg = NULL;</td></tr>
<tr><th id="218">218</th><td>        <b>if</b>(asprintf(&amp;psz_msg, <q>"%s %s%s: %s"</q>, p_item-&gt;psz_module,</td></tr>
<tr><th id="219">219</th><td>                    p_item-&gt;psz_object_type, msg_type[type], msg) &gt; <var>0</var>) {</td></tr>
<tr><th id="220">220</th><td>            wchar_t* wmsg = ToWide(psz_msg);</td></tr>
<tr><th id="221">221</th><td>            OutputDebugStringW(wmsg);</td></tr>
<tr><th id="222">222</th><td>            free(wmsg);</td></tr>
<tr><th id="223">223</th><td>            free(psz_msg);</td></tr>
<tr><th id="224">224</th><td>        }</td></tr>
<tr><th id="225">225</th><td>    }</td></tr>
<tr><th id="226">226</th><td>    free(msg);</td></tr>
<tr><th id="227">227</th><td>}</td></tr>
<tr><th id="228">228</th><td><u>#<span data-ppcond="189">endif</span></u></td></tr>
<tr><th id="229">229</th><td></td></tr>
<tr><th id="230">230</th><td><i class="doc">/**</i></td></tr>
<tr><th id="231">231</th><td><i class="doc"> * Sets the message logging callback.</i></td></tr>
<tr><th id="232">232</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">cb</span> message callback, or NULL to reset</i></td></tr>
<tr><th id="233">233</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">data</span> data pointer for the message callback</i></td></tr>
<tr><th id="234">234</th><td><i class="doc"> */</i></td></tr>
<tr><th id="235">235</th><td><em>void</em> <dfn class="decl def" id="vlc_LogSet" title='vlc_LogSet' data-ref="vlc_LogSet">vlc_LogSet</dfn> (<a class="typedef" href="../../include/vlc_common.h.html#libvlc_int_t" title='libvlc_int_t' data-type='struct libvlc_int_t' data-ref="libvlc_int_t">libvlc_int_t</a> *<dfn class="local col3 decl" id="33vlc" title='vlc' data-type='libvlc_int_t *' data-ref="33vlc">vlc</dfn>, <a class="typedef" href="../../include/vlc_interface.h.html#vlc_log_cb" title='vlc_log_cb' data-type='void (*)(void *, int, const vlc_log_t *, const char *, __va_list_tag *)' data-ref="vlc_log_cb">vlc_log_cb</a> <dfn class="local col4 decl" id="34cb" title='cb' data-type='vlc_log_cb' data-ref="34cb">cb</dfn>, <em>void</em> *<dfn class="local col5 decl" id="35opaque" title='opaque' data-type='void *' data-ref="35opaque">opaque</dfn>)</td></tr>
<tr><th id="236">236</th><td>{</td></tr>
<tr><th id="237">237</th><td>    <a class="typedef" href="../libvlc.h.html#libvlc_priv_t" title='libvlc_priv_t' data-type='struct libvlc_priv_t' data-ref="libvlc_priv_t">libvlc_priv_t</a> *<dfn class="local col6 decl" id="36priv" title='priv' data-type='libvlc_priv_t *' data-ref="36priv">priv</dfn> = <a class="ref" href="../libvlc.h.html#libvlc_priv" title='libvlc_priv' data-ref="libvlc_priv">libvlc_priv</a> (<a class="local col3 ref" href="#33vlc" title='vlc' data-ref="33vlc">vlc</a>);</td></tr>
<tr><th id="238">238</th><td></td></tr>
<tr><th id="239">239</th><td>    <b>if</b> (<a class="local col4 ref" href="#34cb" title='cb' data-ref="34cb">cb</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="240">240</th><td>    {</td></tr>
<tr><th id="241">241</th><td><u>#<span data-ppcond="241">if</span> defined (<a class="macro" href="../../config.h.html#257" data-ref="_M/HAVE_ISATTY">HAVE_ISATTY</a>) &amp;&amp; !defined (<span class="macro" data-ref="_M/_WIN32">_WIN32</span>)</u></td></tr>
<tr><th id="242">242</th><td>        <b>if</b> (<a class="ref" href="../../../include/unistd.h.html#isatty" title='isatty' data-ref="isatty">isatty</a> (<a class="macro" href="../../../include/unistd.h.html#212" title="2" data-ref="_M/STDERR_FILENO">STDERR_FILENO</a>) &amp;&amp; <a class="macro" href="../../include/vlc_variables.h.html#676" title="var_InheritBool(__builtin_choose_expr( __builtin_offsetof(__typeof__(*(vlc)), psz_object_type), (void)0 , (vlc_object_t *)(vlc)), &quot;color&quot;)" data-ref="_M/var_InheritBool">var_InheritBool</a> (<a class="local col3 ref" href="#33vlc" title='vlc' data-ref="33vlc">vlc</a>, <q>"color"</q>))</td></tr>
<tr><th id="243">243</th><td>            <a class="local col4 ref" href="#34cb" title='cb' data-ref="34cb">cb</a> = <a class="tu ref" href="#PrintColorMsg" title='PrintColorMsg' data-use='r' data-ref="PrintColorMsg">PrintColorMsg</a>;</td></tr>
<tr><th id="244">244</th><td>        <b>else</b></td></tr>
<tr><th id="245">245</th><td><u>#<span data-ppcond="241">endif</span></u></td></tr>
<tr><th id="246">246</th><td>            <a class="local col4 ref" href="#34cb" title='cb' data-ref="34cb">cb</a> = <a class="tu ref" href="#PrintMsg" title='PrintMsg' data-use='r' data-ref="PrintMsg">PrintMsg</a>;</td></tr>
<tr><th id="247">247</th><td>        <a class="local col5 ref" href="#35opaque" title='opaque' data-ref="35opaque">opaque</a> = (<em>void</em> *)(<a class="typedef" href="../../../include/unistd.h.html#intptr_t" title='intptr_t' data-type='__intptr_t' data-ref="intptr_t">intptr_t</a>)<a class="local col6 ref" href="#36priv" title='priv' data-ref="36priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::verbose" title='libvlc_priv_t::&lt;anonymous struct&gt;::verbose' data-ref="libvlc_priv_t::{anonymous}::verbose">verbose</a>;</td></tr>
<tr><th id="248">248</th><td>    }</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td>    <a class="ref" href="../../include/vlc_threads.h.html#vlc_rwlock_wrlock" title='vlc_rwlock_wrlock' data-ref="vlc_rwlock_wrlock">vlc_rwlock_wrlock</a> (&amp;<a class="local col6 ref" href="#36priv" title='priv' data-ref="36priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::lock" title='libvlc_priv_t::&lt;anonymous struct&gt;::lock' data-ref="libvlc_priv_t::{anonymous}::lock">lock</a>);</td></tr>
<tr><th id="251">251</th><td>    <a class="local col6 ref" href="#36priv" title='priv' data-ref="36priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::cb" title='libvlc_priv_t::&lt;anonymous struct&gt;::cb' data-ref="libvlc_priv_t::{anonymous}::cb">cb</a> = <a class="local col4 ref" href="#34cb" title='cb' data-ref="34cb">cb</a>;</td></tr>
<tr><th id="252">252</th><td>    <a class="local col6 ref" href="#36priv" title='priv' data-ref="36priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::opaque" title='libvlc_priv_t::&lt;anonymous struct&gt;::opaque' data-ref="libvlc_priv_t::{anonymous}::opaque">opaque</a> = <a class="local col5 ref" href="#35opaque" title='opaque' data-ref="35opaque">opaque</a>;</td></tr>
<tr><th id="253">253</th><td>    <a class="ref" href="../../include/vlc_threads.h.html#vlc_rwlock_unlock" title='vlc_rwlock_unlock' data-ref="vlc_rwlock_unlock">vlc_rwlock_unlock</a> (&amp;<a class="local col6 ref" href="#36priv" title='priv' data-ref="36priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::lock" title='libvlc_priv_t::&lt;anonymous struct&gt;::lock' data-ref="libvlc_priv_t::{anonymous}::lock">lock</a>);</td></tr>
<tr><th id="254">254</th><td></td></tr>
<tr><th id="255">255</th><td>    <i>/* Announce who we are */</i></td></tr>
<tr><th id="256">256</th><td>    <a class="macro" href="../../include/vlc_messages.h.html#77" title="vlc_Log( __builtin_choose_expr( __builtin_offsetof(__typeof__(*(vlc)), psz_object_type), (void)0 , (vlc_object_t *)(vlc)), VLC_MSG_DBG, core, &quot;VLC media player - %s&quot;, &quot;2.2.0-git Weatherwax&quot; )" data-ref="_M/msg_Dbg">msg_Dbg</a> (vlc, <q>"VLC media player - %s"</q>, <a class="macro" href="../../config.h.html#684" title="&quot;2.2.0-git Weatherwax&quot;" data-ref="_M/VERSION_MESSAGE">VERSION_MESSAGE</a>);</td></tr>
<tr><th id="257">257</th><td>    <a class="macro" href="../../include/vlc_messages.h.html#77" title="vlc_Log( __builtin_choose_expr( __builtin_offsetof(__typeof__(*(vlc)), psz_object_type), (void)0 , (vlc_object_t *)(vlc)), VLC_MSG_DBG, core, &quot;%s&quot;, &quot;Copyright  1996-2014 the VideoLAN team&quot; )" data-ref="_M/msg_Dbg">msg_Dbg</a> (vlc, <q>"%s"</q>, <a class="macro" href="../../config.h.html#59" title="&quot;Copyright  1996-2014 the VideoLAN team&quot;" data-ref="_M/COPYRIGHT_MESSAGE">COPYRIGHT_MESSAGE</a>);</td></tr>
<tr><th id="258">258</th><td>    <a class="macro" href="../../include/vlc_messages.h.html#77" title="vlc_Log( __builtin_choose_expr( __builtin_offsetof(__typeof__(*(vlc)), psz_object_type), (void)0 , (vlc_object_t *)(vlc)), VLC_MSG_DBG, core, &quot;revision %s&quot;, psz_vlc_changeset )" data-ref="_M/msg_Dbg">msg_Dbg</a> (vlc, <q>"revision %s"</q>, psz_vlc_changeset);</td></tr>
<tr><th id="259">259</th><td>    <a class="macro" href="../../include/vlc_messages.h.html#77" title="vlc_Log( __builtin_choose_expr( __builtin_offsetof(__typeof__(*(vlc)), psz_object_type), (void)0 , (vlc_object_t *)(vlc)), VLC_MSG_DBG, core, &quot;configured with %s&quot;, &quot;./configure  &apos;--enable-debug&apos; &apos;--disable-optimizations&apos; &apos;--prefix=/usr/local/google/home/robertshih/git/vlc/out/&apos;&quot; )" data-ref="_M/msg_Dbg">msg_Dbg</a> (vlc, <q>"configured with %s"</q>, <a class="macro" href="../../config.h.html#56" title="&quot;./configure  &apos;--enable-debug&apos; &apos;--disable-optimizations&apos; &apos;--prefix=/usr/local/google/home/robertshih/git/vlc/out/&apos;&quot;" data-ref="_M/CONFIGURE_LINE">CONFIGURE_LINE</a>);</td></tr>
<tr><th id="260">260</th><td>}</td></tr>
<tr><th id="261">261</th><td></td></tr>
<tr><th id="262">262</th><td><em>void</em> <dfn class="decl def" id="vlc_LogInit" title='vlc_LogInit' data-ref="vlc_LogInit">vlc_LogInit</dfn> (<a class="typedef" href="../../include/vlc_common.h.html#libvlc_int_t" title='libvlc_int_t' data-type='struct libvlc_int_t' data-ref="libvlc_int_t">libvlc_int_t</a> *<dfn class="local col7 decl" id="37vlc" title='vlc' data-type='libvlc_int_t *' data-ref="37vlc">vlc</dfn>)</td></tr>
<tr><th id="263">263</th><td>{</td></tr>
<tr><th id="264">264</th><td>    <a class="typedef" href="../libvlc.h.html#libvlc_priv_t" title='libvlc_priv_t' data-type='struct libvlc_priv_t' data-ref="libvlc_priv_t">libvlc_priv_t</a> *<dfn class="local col8 decl" id="38priv" title='priv' data-type='libvlc_priv_t *' data-ref="38priv">priv</dfn> = <a class="ref" href="../libvlc.h.html#libvlc_priv" title='libvlc_priv' data-ref="libvlc_priv">libvlc_priv</a> (<a class="local col7 ref" href="#37vlc" title='vlc' data-ref="37vlc">vlc</a>);</td></tr>
<tr><th id="265">265</th><td>    <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="39str" title='str' data-type='const char *' data-ref="39str">str</dfn>;</td></tr>
<tr><th id="266">266</th><td></td></tr>
<tr><th id="267">267</th><td>    <b>if</b> (<a class="macro" href="../../include/vlc_variables.h.html#676" title="var_InheritBool(__builtin_choose_expr( __builtin_offsetof(__typeof__(*(vlc)), psz_object_type), (void)0 , (vlc_object_t *)(vlc)), &quot;quiet&quot;)" data-ref="_M/var_InheritBool">var_InheritBool</a> (<a class="local col7 ref" href="#37vlc" title='vlc' data-ref="37vlc">vlc</a>, <q>"quiet"</q>))</td></tr>
<tr><th id="268">268</th><td>        <a class="local col8 ref" href="#38priv" title='priv' data-ref="38priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::verbose" title='libvlc_priv_t::&lt;anonymous struct&gt;::verbose' data-ref="libvlc_priv_t::{anonymous}::verbose">verbose</a> = -<var>1</var>;</td></tr>
<tr><th id="269">269</th><td>    <b>else</b></td></tr>
<tr><th id="270">270</th><td>    <b>if</b> ((<a class="local col9 ref" href="#39str" title='str' data-ref="39str">str</a> = <a class="ref" href="../../../include/stdlib.h.html#getenv" title='getenv' data-ref="getenv">getenv</a> (<q>"VLC_VERBOSE"</q>)) != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="271">271</th><td>        <a class="local col8 ref" href="#38priv" title='priv' data-ref="38priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::verbose" title='libvlc_priv_t::&lt;anonymous struct&gt;::verbose' data-ref="libvlc_priv_t::{anonymous}::verbose">verbose</a> = <a class="ref" href="../../../include/stdlib.h.html#atoi" title='atoi' data-ref="atoi">atoi</a> (<a class="local col9 ref" href="#39str" title='str' data-ref="39str">str</a>);</td></tr>
<tr><th id="272">272</th><td>    <b>else</b></td></tr>
<tr><th id="273">273</th><td>        <a class="local col8 ref" href="#38priv" title='priv' data-ref="38priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::verbose" title='libvlc_priv_t::&lt;anonymous struct&gt;::verbose' data-ref="libvlc_priv_t::{anonymous}::verbose">verbose</a> = <a class="macro" href="../../include/vlc_variables.h.html#687" title="var_InheritInteger(__builtin_choose_expr( __builtin_offsetof(__typeof__(*(vlc)), psz_object_type), (void)0 , (vlc_object_t *)(vlc)), &quot;verbose&quot;)" data-ref="_M/var_InheritInteger">var_InheritInteger</a> (<a class="local col7 ref" href="#37vlc" title='vlc' data-ref="37vlc">vlc</a>, <q>"verbose"</q>);</td></tr>
<tr><th id="274">274</th><td></td></tr>
<tr><th id="275">275</th><td>    <a class="ref" href="../../include/vlc_threads.h.html#vlc_rwlock_init" title='vlc_rwlock_init' data-ref="vlc_rwlock_init">vlc_rwlock_init</a> (&amp;<a class="local col8 ref" href="#38priv" title='priv' data-ref="38priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::lock" title='libvlc_priv_t::&lt;anonymous struct&gt;::lock' data-ref="libvlc_priv_t::{anonymous}::lock">lock</a>);</td></tr>
<tr><th id="276">276</th><td>    <a class="ref" href="#vlc_LogSet" title='vlc_LogSet' data-ref="vlc_LogSet">vlc_LogSet</a> (<a class="local col7 ref" href="#37vlc" title='vlc' data-ref="37vlc">vlc</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="277">277</th><td>}</td></tr>
<tr><th id="278">278</th><td></td></tr>
<tr><th id="279">279</th><td><em>void</em> <dfn class="decl def" id="vlc_LogDeinit" title='vlc_LogDeinit' data-ref="vlc_LogDeinit">vlc_LogDeinit</dfn> (<a class="typedef" href="../../include/vlc_common.h.html#libvlc_int_t" title='libvlc_int_t' data-type='struct libvlc_int_t' data-ref="libvlc_int_t">libvlc_int_t</a> *<dfn class="local col0 decl" id="40vlc" title='vlc' data-type='libvlc_int_t *' data-ref="40vlc">vlc</dfn>)</td></tr>
<tr><th id="280">280</th><td>{</td></tr>
<tr><th id="281">281</th><td>    <a class="typedef" href="../libvlc.h.html#libvlc_priv_t" title='libvlc_priv_t' data-type='struct libvlc_priv_t' data-ref="libvlc_priv_t">libvlc_priv_t</a> *<dfn class="local col1 decl" id="41priv" title='priv' data-type='libvlc_priv_t *' data-ref="41priv">priv</dfn> = <a class="ref" href="../libvlc.h.html#libvlc_priv" title='libvlc_priv' data-ref="libvlc_priv">libvlc_priv</a> (<a class="local col0 ref" href="#40vlc" title='vlc' data-ref="40vlc">vlc</a>);</td></tr>
<tr><th id="282">282</th><td></td></tr>
<tr><th id="283">283</th><td>    <a class="ref" href="../../include/vlc_threads.h.html#vlc_rwlock_destroy" title='vlc_rwlock_destroy' data-ref="vlc_rwlock_destroy">vlc_rwlock_destroy</a> (&amp;<a class="local col1 ref" href="#41priv" title='priv' data-ref="41priv">priv</a>-&gt;<a class="ref" href="../libvlc.h.html#libvlc_priv_t::log" title='libvlc_priv_t::log' data-ref="libvlc_priv_t::log">log</a>.<a class="ref" href="../libvlc.h.html#libvlc_priv_t::{anonymous}::lock" title='libvlc_priv_t::&lt;anonymous struct&gt;::lock' data-ref="libvlc_priv_t::{anonymous}::lock">lock</a>);</td></tr>
<tr><th id="284">284</th><td>}</td></tr>
<tr><th id="285">285</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2016-Oct-25</em> from project vlc revision <em>2.2.0-git</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.0.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
